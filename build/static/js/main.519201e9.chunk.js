(this["webpackJsonpuser-posts"]=this["webpackJsonpuser-posts"]||[]).push([[0],{131:function(e,t,n){e.exports={card:"Card_card__fXxBI"}},132:function(e,t,n){e.exports={btn:"Button_btn__2OU2l"}},138:function(e,t,n){e.exports={backdrop:"Backdrop_backdrop__1_XCN"}},146:function(e,t,n){},22:function(e,t,n){e.exports={content:"SignupComponent_content__-xS3c",title:"SignupComponent_title__3Y18q",parentContainer:"SignupComponent_parentContainer__3pl2j",container:"SignupComponent_container__Nfpou",inputContainer:"SignupComponent_inputContainer__1L_WW",imageContainer:"SignupComponent_imageContainer__27QWb",input:"SignupComponent_input__1OX9u",actions:"SignupComponent_actions__3CL6e"}},246:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(84),r=n.n(c),s=n(29),i=n(0),o=n.n(i),l=n(1),u=n(11),j=n(18),d=n(130),b=n(41),p=n(60),O=n(38),x=Object(d.a)({apiKey:"AIzaSyA0t-XHWc3AonmYat7_pEIiTxm99rNqEyI",authDomain:"user-posts-9df11.firebaseapp.com",databaseURL:"https://user-posts-9df11-default-rtdb.firebaseio.com",projectId:"user-posts-9df11",storageBucket:"user-posts-9df11.appspot.com",messagingSenderId:"70798554958",appId:"1:70798554958:web:a9ac5ebfd7d2ec5629101f"}),f=Object(b.d)(x);function h(e,t){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.e)(Object(b.b)(f,"users",t),n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.f)(Object(b.b)(f,"users",t),n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=Object(O.b)();Object(O.c)(_,(function(e){e?(localStorage.getItem("user_token")||localStorage.setItem("user_token",e.accessToken),localStorage.getItem("user_id")||localStorage.setItem("user_id",e.uid)):(localStorage.getItem("user_token")&&localStorage.removeItem("user_token"),localStorage.getItem("user_id")||localStorage.removeItem("user_id"))}));var y=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(O.b)(),e.next=4,Object(O.a)(a,t,n);case 4:return c=e.sent,e.abrupt("return",c.user);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(null!=t){var c=Object(p.b)(),r=t.name.split(".")[(t.name+"").split(".").length-1],s=Object(p.c)(c,"".concat(n,"/").concat(t.name)),i={contentType:"image/".concat(r)},o=Object(p.d)(s,t,i);o.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){switch(e.code){case"storage/unauthorized":case"storage/canceled":case"storage/unknown":a(e)}}),(function(){Object(p.a)(o.snapshot.ref).then((function(t){console.log("File available at",t),e(t)}))}))}})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(O.b)(),e.next=4,Object(O.d)(a,t,n);case 4:return c=e.sent,e.abrupt("return",c.user);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0.code,e.t0.message),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(O.b)(),e.next=4,Object(O.e)(a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.code,e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),S=n(5),N={isLoggedIn:!1,token:"",uid:"",error:{code:"",message:""},callSetError:function(e){},login:function(e,t){},signup:function(e,t){},signOff:function(){},clearError:function(){}},I=Object(a.createContext)(N),L=I.Provider,E=function(e){Object(a.useEffect)((function(){var e=localStorage.getItem("user_token");e&&d(e);var t=localStorage.getItem("user_id");t&&x(t),e&&r(!0)}),[]);var t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),j=i[0],d=i[1],b=Object(a.useState)(""),p=Object(u.a)(b,2),O=p[0],x=p[1],f=Object(a.useState)(),h=Object(u.a)(f,2),g=h[0],m=h[1],v=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,n);case 2:if((a=e.sent).code){e.next=10;break}return r(!0),d(a.accessToken),x(a.uid),e.abrupt("return",a);case 10:return m(a),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,n);case 2:if((a=e.sent).code){e.next=10;break}return r(!0),d(a.accessToken),x(a.uid),e.abrupt("return",a);case 10:return m(a),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:r(!1),d("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(L,{value:{isLoggedIn:c,login:v,signUp:_,callSetError:function(e){return m(e)},token:j,uid:O,error:g,signOff:C,clearError:function(){m(null)}},children:e.children})},P=I,U=(n(146),n(17)),R=n(131),A=n.n(R),T=function(e){var t="".concat(A.a.card," ").concat(e.className?e.className:"");return Object(S.jsx)("div",{className:t,style:Object(j.a)({},e.style),children:e.children})},F=n(22),M=n.n(F),q=n(86),B=n.n(q),D=function(e){var t="".concat(B.a.input," ").concat(e.className),n=Object(S.jsx)("input",Object(j.a)({style:Object(j.a)({},e.style),id:e.id,className:t,value:e.value,name:e.name,onChange:e.onChange},e));return e.isRef&&(n=Object(S.jsx)("input",Object(j.a)({style:Object(j.a)({},e.style),id:e.id,className:t,name:e.name,ref:e.inputRef},e))),Object(S.jsxs)("div",{className:B.a.inputContainer,children:[Object(S.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",flex:1},children:Object(S.jsx)("label",{htmlFor:e.id,children:e.title})}),n]})},W=n(132),J=n.n(W),X=function(e){var t="".concat(e.className," ").concat(J.a.btn),n=Object(S.jsx)("button",Object(j.a)(Object(j.a)({className:t,onClick:e.onClick,style:Object(j.a)({},e.style)},e),{},{children:e.title}));return e.isLink&&(n=Object(S.jsx)(s.b,Object(j.a)(Object(j.a)({to:e.to,className:t,style:Object(j.a)({},e.style)},e),{},{children:e.title}))),n},G=n(73),H=n.n(G),Z=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=new FileReader;s.addEventListener("load",(function(){r(s.result)}),!1);var i=Object(a.useRef)();return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:H.a["image-container"],children:c&&Object(S.jsx)("img",{src:c,alt:e.imageTitle,title:e.imageTitle,className:H.a.image})}),Object(S.jsx)("input",{type:"file",accept:".png,.jpeg,.jpg,.bmp",style:{display:"none"},ref:i,onChange:function(t){t.target.files[0]&&(e.onFileReceived(t.target.files[0]),t.target.files[0]&&s.readAsDataURL(t.target.files[0]))}}),Object(S.jsxs)("div",{className:H.a["button-container"],children:[Object(S.jsx)("label",{children:e.imageTitle}),Object(S.jsx)(X,{title:"Upload",onClick:function(){return i.current.click()},type:"button"})]})]})},z=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(u.a)(r,2),i=s[0],j=s[1],d=Object(U.g)(),b=Object(a.useState)(""),p=Object(u.a)(b,2),O=p[0],x=p[1],f=Object(a.useState)(""),g=Object(u.a)(f,2),v=g[0],_=g[1],y=Object(a.useContext)(P),k=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y.signUp(n,O);case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),y.callSetError(e.t0),e.abrupt("return");case 11:return e.prev=11,e.next=14,h(a.uid,{name:v});case 14:e.next=21;break;case 16:return e.prev=16,e.t1=e.catch(11),y.callSetError(e.t1),a&&d.replace("/"),e.abrupt("return");case 21:return e.prev=21,e.next=24,C(i,"".concat(a.uid,"/images"));case 24:c=e.sent,e.next=32;break;case 27:return e.prev=27,e.t2=e.catch(21),y.callSetError(e.t2),a&&d.replace("/"),e.abrupt("return");case 32:if(!c){e.next=43;break}return e.prev=33,e.next=36,m(a.uid,{profileImageUrl:c});case 36:a&&d.replace("/"),e.next=43;break;case 39:e.prev=39,e.t3=e.catch(33),y.callSetError(e.t3),a&&d.replace("/");case 43:case"end":return e.stop()}}),e,null,[[1,7],[11,16],[21,27],[33,39]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:M.a.content,children:[Object(S.jsx)(T,{className:M.a.title,children:Object(S.jsx)("h1",{children:" Sign Up"})}),Object(S.jsx)("div",{className:M.a.parentContainer,children:Object(S.jsx)(T,{className:M.a.container,style:{paddingBottom:"20px"},children:Object(S.jsxs)("form",{onSubmit:k,children:[Object(S.jsx)("div",{className:M.a.inputContainer,children:Object(S.jsx)(D,{id:"name",type:"name",placeholder:"Name",onChange:function(e){_(e.target.value)},value:v,title:"Name",required:!0})}),Object(S.jsx)("div",{className:M.a.inputContainer,children:Object(S.jsx)(D,{id:"email",type:"email",placeholder:"E Mail",onChange:function(e){c(e.target.value)},value:n,title:"E Mail",required:!0})}),Object(S.jsx)("div",{className:M.a.inputContainer,children:Object(S.jsx)(D,{id:"password",type:"password",placeholder:"Password",onChange:function(e){x(e.target.value)},value:O,title:"Password",required:!0})}),Object(S.jsx)("div",{className:M.a.imageContainer,children:Object(S.jsx)(Z,{imageTitle:"Profile image",onFileReceived:function(e){j(e)}})}),Object(S.jsxs)("div",{className:M.a.actions,children:[Object(S.jsx)(X,{title:"Sign up",onClick:function(){},style:{marginRight:"10px"}}),Object(S.jsx)(X,{title:"Cancel",onClick:function(){y.clearError(),d.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},K=function(){return Object(S.jsx)(z,{})},Y=function(){var e=Object(U.g)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useContext)(P),i=Object(a.useState)(""),j=Object(u.a)(i,2),d=j[0],b=j[1],p=function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,s.login(c,d);case 3:t.sent&&e.replace("/");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:M.a.content,children:[Object(S.jsx)(T,{className:M.a.title,children:Object(S.jsx)("h1",{children:" Login"})}),Object(S.jsx)("div",{className:M.a.parentContainer,children:Object(S.jsx)(T,{className:M.a.container,style:{paddingBottom:"20px"},children:Object(S.jsxs)("form",{onSubmit:p,children:[Object(S.jsx)(D,{id:"email",type:"email",placeholder:"E Mail",onChange:function(e){r(e.target.value)},value:c,title:"E Mail",required:!0}),Object(S.jsx)(D,{id:"email",type:"password",placeholder:"Password",title:"Password",onChange:function(e){b(e.target.value)},value:d,required:!0}),Object(S.jsxs)("div",{className:M.a.actions,children:[Object(S.jsx)(X,{title:"Login",onClick:function(){},style:{marginRight:"10px"}}),Object(S.jsx)(X,{title:"Cancel",type:"button",onClick:function(){s.clearError(),e.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},Q=function(){return Object(S.jsx)(Y,{})},V=n(51),$=n.n(V),ee=function(){var e=Object(U.g)(),t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),j=i[0],d=i[1],b=Object(a.useContext)(P),p=function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,b.login(c,j);case 3:t.sent&&e.replace("/");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:$.a.content,children:[Object(S.jsx)(T,{className:$.a.title,children:Object(S.jsx)("h1",{children:"Add Post"})}),Object(S.jsx)("div",{className:$.a.parentContainer,children:Object(S.jsx)(T,{className:$.a.container,style:{paddingBottom:"20px"},children:Object(S.jsxs)("form",{onSubmit:p,children:[Object(S.jsx)(D,{id:"text",type:"text",placeholder:"Enter title of the post",onChange:function(e){r(e.target.value)},value:c,title:"Title",required:!0}),Object(S.jsx)(D,{id:"text",type:"text",placeholder:"Enter the Author's name",onChange:function(e){d(e.target.value)},value:j,title:"Author",required:!0}),Object(S.jsxs)("div",{className:$.a.actions,children:[Object(S.jsx)(X,{title:"Login",onClick:function(){},style:{marginRight:"10px"}}),Object(S.jsx)(X,{title:"Cancel",type:"button",onClick:function(){b.clearError(),e.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},te=(n(47),n(135),n(136),n(137),n(245),n(88),function(){return Object(S.jsx)(ee,{})}),ne=function(){return Object(S.jsx)("div",{})},ae=function(){return Object(S.jsx)("div",{})},ce=n(52),re=n.n(ce),se=function(e){var t=Object(a.useContext)(P);console.log(t.isLoggedIn);var n=t.isLoggedIn?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("li",{children:Object(S.jsx)(s.b,{to:"/posts/newPost",children:Object(S.jsx)(X,{title:"New Post",onClick:function(){},style:{width:"10vw"}})})}),Object(S.jsx)("li",{children:Object(S.jsx)(X,{title:"Sign Out",onClick:t.signOff,style:{width:"10vw"}})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("li",{children:Object(S.jsx)(s.b,{to:"/signup",children:Object(S.jsx)(X,{title:"Sign Up",onClick:t.signOff,style:{width:"10vw"}})})}),Object(S.jsx)("li",{children:Object(S.jsx)(s.b,{to:"/login",children:Object(S.jsx)(X,{title:"Login",onClick:t.signOff,style:{width:"10vw"}})})})]}),c=!!e.imageUrl?Object(S.jsx)("img",{className:re.a.logo,src:e.imageUrl,alt:e.title}):Object(S.jsx)("span",{className:re.a.logo,style:{display:"inline-block"},children:e.title});return Object(S.jsxs)("div",{className:re.a.container,children:[Object(S.jsx)("div",{className:re.a.containerLogo,children:Object(S.jsxs)(s.b,{to:"/",children:[" ",c]})}),Object(S.jsx)("h1",{children:" User Posts"}),Object(S.jsx)("div",{children:Object(S.jsx)("nav",{children:Object(S.jsx)("ul",{className:re.a.containerNav,children:n})})})]})},ie=n(53),oe=n.n(ie),le=function(e){return Object(S.jsx)("div",{className:oe.a.container,onClick:e.onClose,children:Object(S.jsxs)("div",{className:oe.a["modal-container"],onClick:function(e){return e.stopPropagation()},children:[Object(S.jsx)("div",{className:oe.a["modal-header"],style:Object(j.a)({},e.headerStyle),children:e.header}),Object(S.jsx)("div",{style:Object(j.a)(Object(j.a)({},e.bodyStyle),{},{display:"flex",justifyContent:"center",alignItems:"center"}),className:oe.a["modal-body"],children:e.children}),Object(S.jsx)("div",{className:oe.a["modal-footer"],children:e.actions})]})})},ue=n(138),je=n.n(ue),de=function(e){return Object(S.jsx)("div",{onClick:e.onClose,className:je.a.backdrop})},be=function(e){var t=Object(a.useContext)(P).error;return t&&t.message?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(de,{onClose:e.onClose}),Object(S.jsx)(le,{header:Object(S.jsx)("h1",{style:{color:"white",fontWeight:"bold",padding:"5px",width:"100%"},children:"Some error occurred"}),actions:Object(S.jsx)(X,{title:"Close",onClick:e.onClose,style:{fontWeight:"bold"}}),bodyStyle:{color:"red"},onClose:e.onClose,children:Object(S.jsx)("p",{style:{backgroundColor:"white",padding:"10px",borderRadius:"5px",border:"2px solid black"},children:t.message.replace(/Firebase:/g,"")})})]}):null},pe=function(e){return Object(S.jsx)("div",{style:{flex:1,alignSelf:"center",display:"flex",flexDirection:"column"},children:e.children})};var Oe=function(){var e=Object(a.useContext)(P),t=e.isLoggedIn?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(U.b,{path:"/posts/newPost",children:Object(S.jsx)(ne,{})}),Object(S.jsx)(U.b,{path:"/posts/:id",children:Object(S.jsx)(ae,{})})]}):null;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(be,{onClose:function(){return e.clearError()}}),Object(S.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Object(S.jsx)(se,{title:"User Posts",imageUrl:"/blog.jfif"}),Object(S.jsx)(pe,{children:Object(S.jsxs)(U.d,{children:[Object(S.jsx)(U.b,{path:"/",exact:!0,children:Object(S.jsx)(U.a,{to:"/posts"})}),Object(S.jsx)(U.b,{path:"/signup",children:Object(S.jsx)(K,{})}),Object(S.jsx)(U.b,{path:"/login",children:Object(S.jsx)(Q,{})}),Object(S.jsx)(U.b,{path:"/posts",exact:!0,children:Object(S.jsx)(te,{})}),t,Object(S.jsx)(U.b,{path:"**",children:Object(S.jsx)(U.a,{to:"/posts"})})]})})]})]})};r.a.render(Object(S.jsx)(E,{children:Object(S.jsx)(s.a,{children:Object(S.jsx)(Oe,{})})}),document.getElementById("root"))},51:function(e,t,n){e.exports={content:"AddPost_content__2d9Hb",title:"AddPost_title__3C7qy",parentContainer:"AddPost_parentContainer__1143G",container:"AddPost_container__FStfg",inputContainer:"AddPost_inputContainer__n2vjo",input:"AddPost_input__1BqZx",actions:"AddPost_actions__3_Ld8"}},52:function(e,t,n){e.exports={container:"Layout_container__3JcJZ",containerLogo:"Layout_containerLogo__3WdLM",containerNav:"Layout_containerNav__118kZ",logo:"Layout_logo__3iCfm"}},53:function(e,t,n){e.exports={container:"Modal_container__3cGOI","modal-container":"Modal_modal-container__2l8su","modal-header":"Modal_modal-header__1MJC1","modal-body":"Modal_modal-body__2kJKa","modal-footer":"Modal_modal-footer__2rLty"}},73:function(e,t,n){e.exports={"image-container":"ImageUpload_image-container__S2-Pb","button-container":"ImageUpload_button-container__1WJDd"}},86:function(e,t,n){e.exports={inputContainer:"Input_inputContainer__2_irD",input:"Input_input__FrfsP"}},88:function(e,t,n){e.exports={editor:"RichText_editor__xR2ML",wrapper:"RichText_wrapper__2TeGH"}}},[[246,1,2]]]);
//# sourceMappingURL=main.519201e9.chunk.js.map