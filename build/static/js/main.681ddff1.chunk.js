(this["webpackJsonpuser-posts"]=this["webpackJsonpuser-posts"]||[]).push([[0],{139:function(e,t,n){e.exports={card:"Card_card__fXxBI"}},140:function(e,t,n){e.exports={btn:"Button_btn__2OU2l"}},142:function(e,t,n){e.exports={backdrop:"Backdrop_backdrop__1_XCN"}},156:function(e,t,n){},159:function(e,t,n){},25:function(e,t,n){e.exports={content:"SignupComponent_content__-xS3c",title:"SignupComponent_title__3Y18q",parentContainer:"SignupComponent_parentContainer__3pl2j",container:"SignupComponent_container__Nfpou",inputContainer:"SignupComponent_inputContainer__1L_WW",imageContainer:"SignupComponent_imageContainer__27QWb",input:"SignupComponent_input__1OX9u",actions:"SignupComponent_actions__3CL6e"}},256:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),c=n(61),i=n.n(c),s=n(23),o=n(0),l=n.n(o),u=n(1),d=n(11),j=n(14),p=n(138),b=n(19),f=n(65),x=n(43),O=Object(p.a)({apiKey:"AIzaSyA0t-XHWc3AonmYat7_pEIiTxm99rNqEyI",authDomain:"user-posts-9df11.firebaseapp.com",databaseURL:"https://user-posts-9df11-default-rtdb.firebaseio.com",projectId:"user-posts-9df11",storageBucket:"user-posts-9df11.appspot.com",messagingSenderId:"70798554958",appId:"1:70798554958:web:a9ac5ebfd7d2ec5629101f"}),h=Object(b.f)(O);function g(){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(b.g)(Object(b.b)(h,"categories")),e.next=3,Object(b.e)(t);case 3:if(0!=(n=e.sent).size){e.next=8;break}return e.abrupt("return",[]);case 8:return r=[],n.forEach((function(e){r.push(Object(j.a)({id:e.id},e.data()))})),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)(Object(b.d)(h,"categories",t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)(Object(b.d)(h,"users/".concat(t,"/posts/").concat(n)));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(l.a.mark((function e(t){var n,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.g)(Object(b.b)(h,"categories"),Object(b.j)("name","==",t)),e.next=3,Object(b.e)(n);case 3:if(0!=(r=e.sent).size){e.next=13;break}return e.next=8,Object(b.a)(Object(b.b)(h,"categories"),{name:t});case 8:return a=e.sent,e.abrupt("return",{id:a.id,name:t});case 13:return r.forEach((function(e){c=e.id})),e.abrupt("return",{id:c,name:t});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.a)(Object(b.b)(h,"users/".concat(t,"/posts")),n);case 3:return r=e.sent,e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.h)(Object(b.d)(h,"users",t),n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.i)(Object(b.d)(h,"users",t),n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(b.b)(h,"users"),e.next=3,Object(b.e)(t);case 3:return n=e.sent,r=n.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.b)(h,"users/".concat(t,"/posts")),e.next=3,Object(b.e)(n);case 3:return r=e.sent,a=r.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=Object(x.b)();Object(x.c)(U,(function(e){e?(localStorage.getItem("user_token")||localStorage.setItem("user_token",e.accessToken),localStorage.getItem("user_id")||localStorage.setItem("user_id",e.uid)):(localStorage.getItem("user_token")&&localStorage.removeItem("user_token"),localStorage.getItem("user_id")||localStorage.removeItem("user_id"))}));var F=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(x.b)(),e.next=4,Object(x.a)(r,t,n);case 4:return a=e.sent,e.abrupt("return",a.user);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(null!=t){var a=Object(f.b)(),c=t.name.split(".")[(t.name+"").split(".").length-1],i=Object(f.c)(a,"".concat(n,"/").concat(t.name)),s={contentType:"image/".concat(c)},o=Object(f.d)(i,t,s);o.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){switch(e.code){case"storage/unauthorized":case"storage/canceled":case"storage/unknown":r(e)}}),(function(){Object(f.a)(o.snapshot.ref).then((function(t){console.log("File available at",t),e(t)}))}))}})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(x.b)(),e.next=4,Object(x.d)(r,t,n);case 4:return a=e.sent,e.abrupt("return",a.user);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0.code,e.t0.message),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(x.b)(),e.next=4,Object(x.e)(r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.code,e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),V=n(3),q={isLoggedIn:!1,token:"",uid:"",error:{code:"",message:""},confirm:{message:""},callSetError:function(e){},login:function(e,t){},signup:function(e,t){},signOff:function(){},callSetConfirm:function(e){},clearConfirm:function(){},clearError:function(){}},H=Object(r.createContext)(q),J=H.Provider,z=function(e){Object(r.useEffect)((function(){var e=localStorage.getItem("user_token");e&&j(e);var t=localStorage.getItem("user_id");t&&x(t),e&&c(!0)}),[]);var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),s=Object(d.a)(i,2),o=s[0],j=s[1],p=Object(r.useState)(""),b=Object(d.a)(p,2),f=b[0],x=b[1],O=Object(r.useState)(),h=Object(d.a)(O,2),g=h[0],m=h[1],v=Object(r.useState)(""),_=Object(d.a)(v,2),y=_[0],C=_[1];Object(r.useEffect)((function(){localStorage.setItem("user_token",o),localStorage.setItem("user_id",f)}),[o]);var w=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t,n);case 2:if((r=e.sent).code){e.next=10;break}return c(!0),j(r.accessToken),x(r.uid),e.abrupt("return",r);case 10:return m(r),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t,n);case 2:if((r=e.sent).code){e.next=10;break}return c(!0),j(r.accessToken),x(r.uid),e.abrupt("return",r);case 10:return m(r),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:c(!1),j("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(J,{value:{isLoggedIn:a,login:w,signUp:k,callSetError:function(e){return m(e)},token:o,uid:f,error:g,confirm:{message:y},clearConfirm:function(){C("")},callSetConfirm:function(e){return C(e)},signOff:N,clearError:function(){m(null)}},children:e.children})},X=H,G=n(22),Y=n(18),Z=n(97),K=Object(Z.b)({name:"userAndPosts",initialState:{categories:[],users:[],posts:[]},reducers:{loadCategories:function(e,t){e.categories=t.payload},addCategories:function(e,t){var n=t.payload,r=e.categories.map((function(e){return e.id})),a=n.filter((function(e){return!r.includes(e.id)}));e.categories=[].concat(Object(Y.a)(e.categories),Object(Y.a)(a))},deleteCategories:function(e,t){var n=t.payload;e.categories=e.categories.filter((function(e){return!n.includes(e.id)}))},deletePosts:function(e,t){var n=t.payload.uid,r=t.payload.id;e.posts=e.posts.filter((function(e){return!(e.uid===n&&e.id===r)}))},addPost:function(e,t){e.posts=[].concat(Object(Y.a)(e.posts),[t.payload])},loadUsers:function(e,t){e.users=t.payload},loadPosts:function(e,t){e.posts=[].concat(Object(Y.a)(e.posts),Object(Y.a)(t.payload))}}}),Q=K.actions,$=Object(Z.a)({reducer:{userPosts:K.reducer},devTools:!0}),ee=n(8),te=(n(156),n(20)),ne=n(139),re=n.n(ne),ae=function(e){var t="".concat(re.a.card," ").concat(e.className?e.className:"");return Object(V.jsx)("div",{className:t,style:Object(j.a)({},e.style),children:e.children})},ce=n(25),ie=n.n(ce),se=n(94),oe=n.n(se),le=function(e){var t="".concat(oe.a.input," ").concat(e.className),n=Object(V.jsx)("input",{style:Object(j.a)({},e.style),id:e.id,className:t,value:e.value,name:e.name,onChange:e.onChange,type:e.type});return e.isRef&&(n=Object(V.jsx)("input",{style:Object(j.a)({},e.style),id:e.id,className:t,name:e.name,ref:e.inputRef,type:e.type})),Object(V.jsxs)("div",{className:oe.a.inputContainer,style:Object(j.a)({},e.inputContainerStyle||null),children:[Object(V.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(V.jsx)("label",{htmlFor:e.id,style:Object(j.a)({},e.inputContainerLabelStyle),children:e.title})}),n]})},ue=n(140),de=n.n(ue),je=function(e){var t="".concat(e.className," ").concat(de.a.btn),n=Object(V.jsx)("button",Object(j.a)(Object(j.a)({className:t,onClick:e.onClick,style:Object(j.a)({},e.style)},e),{},{children:e.title}));return e.isLink&&(n=Object(V.jsx)(s.b,Object(j.a)(Object(j.a)({to:e.to,className:t,style:Object(j.a)({},e.style)},e),{},{children:e.title}))),n},pe=n(79),be=n.n(pe),fe=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],c=n[1],i=new FileReader;i.addEventListener("load",(function(){c(i.result)}),!1);var s=Object(r.useRef)();return Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:be.a["image-container"],children:a&&Object(V.jsx)("img",{src:a,alt:e.imageTitle,title:e.imageTitle,className:be.a.image})}),Object(V.jsx)("input",{type:"file",accept:".png,.jpeg,.jpg,.bmp",style:{display:"none"},ref:s,onChange:function(t){t.target.files[0]&&(e.onFileReceived(t.target.files[0]),t.target.files[0]&&i.readAsDataURL(t.target.files[0]))}}),Object(V.jsxs)("div",{className:be.a["button-container"],children:[Object(V.jsx)("label",{children:e.imageTitle}),Object(V.jsx)(je,{title:"Upload",onClick:function(){return s.current.click()},type:"button"})]})]})},xe=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),i=Object(d.a)(c,2),s=i[0],o=i[1],j=Object(te.g)(),p=Object(r.useState)(""),b=Object(d.a)(p,2),f=b[0],x=b[1],O=Object(r.useState)(""),h=Object(d.a)(O,2),g=h[0],m=h[1],v=Object(r.useContext)(X),_=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,v.signUp(n,f);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),v.callSetError(e.t0),e.abrupt("return");case 11:return e.prev=11,e.next=14,P(r.uid,{name:g});case 14:e.next=21;break;case 16:return e.prev=16,e.t1=e.catch(11),v.callSetError(e.t1),r&&j.replace("/"),e.abrupt("return");case 21:return e.prev=21,e.next=24,W(s,"".concat(r.uid,"/images"));case 24:a=e.sent,e.next=32;break;case 27:return e.prev=27,e.t2=e.catch(21),v.callSetError(e.t2),r&&j.replace("/"),e.abrupt("return");case 32:if(!a){e.next=43;break}return e.prev=33,e.next=36,E(r.uid,{profileImageUrl:a});case 36:r&&j.replace("/"),e.next=43;break;case 39:e.prev=39,e.t3=e.catch(33),v.callSetError(e.t3),r&&j.replace("/");case 43:case"end":return e.stop()}}),e,null,[[1,7],[11,16],[21,27],[33,39]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:ie.a.content,children:[Object(V.jsx)(ae,{className:ie.a.title,children:Object(V.jsx)("h1",{children:" Sign Up"})}),Object(V.jsx)("div",{className:ie.a.parentContainer,children:Object(V.jsx)(ae,{className:ie.a.container,style:{paddingBottom:"20px"},children:Object(V.jsxs)("form",{onSubmit:_,children:[Object(V.jsx)("div",{className:ie.a.inputContainer,children:Object(V.jsx)(le,{id:"name",type:"name",placeholder:"Name",onChange:function(e){m(e.target.value)},value:g,title:"Name",inputContainerLabelStyle:{paddingTop:"10px"},required:!0})}),Object(V.jsx)("div",{className:ie.a.inputContainer,children:Object(V.jsx)(le,{id:"email",type:"email",placeholder:"E Mail",onChange:function(e){a(e.target.value)},value:n,title:"E Mail",inputContainerLabelStyle:{paddingTop:"10px"},required:!0})}),Object(V.jsx)("div",{className:ie.a.inputContainer,children:Object(V.jsx)(le,{id:"password",type:"password",placeholder:"Password",onChange:function(e){x(e.target.value)},value:f,title:"Password",required:!0})}),Object(V.jsx)("div",{className:ie.a.imageContainer,children:Object(V.jsx)(fe,{imageTitle:"Profile image",onFileReceived:function(e){o(e)}})}),Object(V.jsxs)("div",{className:ie.a.actions,children:[Object(V.jsx)(je,{title:"Sign up",onClick:function(){},style:{marginRight:"10px"}}),Object(V.jsx)(je,{title:"Cancel",onClick:function(){v.clearError(),j.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},Oe=function(){return Object(V.jsx)(xe,{})},he=n(5),ge=function(){var e,t=Object(te.g)(),n=Object(r.useState)(""),a=Object(d.a)(n,2),c=a[0],i=a[1],s=Object(r.useContext)(X),o=Object(r.useState)(""),j=Object(d.a)(o,2),p=j[0],b=j[1],f=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,s.login(c,p);case 3:e.sent&&t.replace("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:ie.a.content,children:[Object(V.jsx)(ae,{className:ie.a.title,children:Object(V.jsx)("h1",{children:" Login"})}),Object(V.jsx)("div",{className:ie.a.parentContainer,children:Object(V.jsx)(ae,{className:ie.a.container,style:{paddingBottom:"20px"},children:Object(V.jsxs)("form",{onSubmit:f,children:[Object(V.jsx)(le,{id:"email",type:"email",placeholder:"E Mail",onChange:function(e){i(e.target.value)},value:c,title:"E Mail",inputContainerLabelStyle:{paddingTop:"10px"},required:!0}),Object(V.jsx)(le,(e={id:"email",type:"password",placeholder:"Password",title:"Password"},Object(he.a)(e,"type","password"),Object(he.a)(e,"onChange",(function(e){b(e.target.value)})),Object(he.a)(e,"value",p),Object(he.a)(e,"inputContainerLabelStyle",{paddingTop:"10px"}),Object(he.a)(e,"required",!0),e)),Object(V.jsxs)("div",{className:ie.a.actions,children:[Object(V.jsx)(je,{title:"Login",onClick:function(){},style:{marginRight:"10px"}}),Object(V.jsx)(je,{title:"Cancel",type:"button",onClick:function(){s.clearError(),t.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},me=function(){return Object(V.jsx)(ge,{})},ve=n(28),_e=n.n(ve),ye=n(55),Ce=n.n(ye),we=function(e){return Object(V.jsx)("div",{className:Ce.a.container,onClick:e.onClose,children:Object(V.jsxs)("div",{className:Ce.a["modal-container"],onClick:function(e){return e.stopPropagation()},children:[Object(V.jsx)("div",{className:Ce.a["modal-header"],style:Object(j.a)({},e.headerStyle),children:e.header}),Object(V.jsx)("div",{style:Object(j.a)(Object(j.a)({},e.bodyStyle),{},{display:"flex",justifyContent:"center",alignItems:"center"}),className:Ce.a["modal-body"],children:e.children}),Object(V.jsx)("div",{className:Ce.a["modal-footer"],children:e.actions})]})})},ke=n(142),Ne=n.n(ke),Se=function(e){return Object(V.jsx)("div",{onClick:e.onClose,className:Ne.a.backdrop})},Pe=function(e){var t=Object(r.useContext)(X),n=t.confirm,a=t.clearConfirm;return n&&n.message?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Se,{onClose:a}),Object(V.jsx)(we,{header:Object(V.jsx)("h1",{style:{color:"white",fontWeight:"bold",padding:"5px",width:"100%"},children:"Are you Sure?"}),actions:Object(V.jsxs)("div",{children:[Object(V.jsx)(je,{title:e.confirmTitle,onClick:e.onConfirm,style:{fontWeight:"bold",color:"red"}}),Object(V.jsx)(je,{title:"Close",onClick:a,style:{fontWeight:"bold"}})]}),bodyStyle:{color:"red"},onClose:a,children:Object(V.jsx)("p",{style:{backgroundColor:"white",padding:"10px",borderRadius:"5px",border:"2px solid black"},children:n.message})})]}):null},Le=function(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},Ee=function(e,t){var n=[],r=t.filter((function(t){return t.id!=e})),a=t.find((function(t){return t.id==e}));return a&&a.tags&&a.tags.length>0&&a.tags.forEach((function(e){var t=!0;r.forEach((function(n){t=t&&!n.tags.includes(e)})),t&&n.push(e)})),n},Ae=function(e){var t,n=Object(r.useRef)(),a=Object(te.h)(),c=new URLSearchParams(a.search).get("deleteAllowed");c&&(t="true"===c);var i=Object(G.b)(),s=Object(te.g)(),o=Object(r.useContext)(X),d=Object(te.i)().postId,j=Object(G.c)((function(e){return e.userPosts.categories})),p=Object(G.c)((function(e){return e.userPosts.posts})),b=p.find((function(e){return e.id===d}));Object(r.useEffect)((function(){b&&(n.current.innerHTML=Le(b.article))}),[b]);var f=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.clearConfirm(),(t=Ee(b.id,p)).forEach(function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i(Q.deleteCategories(t)),e.next=6,y(b.uid,b.id);case 6:n=e.sent,console.log(n),i(Q.deletePosts({uid:b.uid,id:b.id})),o.clearConfirm(),s.replace("/");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(!b)return Object(V.jsx)("h2",{children:"hi there"});if(!j)return Object(V.jsx)("h2",{children:"hi there"});if(!p)return Object(V.jsx)("h2",{children:"hi there"});var x=j.filter((function(e){return b.tags.includes(e.id)}));return b?Object(V.jsxs)("div",{className:_e.a.contentContainer,children:[t&&Object(V.jsx)(Pe,{confirmTitle:"Delete",onConfirm:f}),Object(V.jsxs)("div",{className:_e.a.content,children:[Object(V.jsx)(ae,{className:_e.a.title,children:Object(V.jsx)("h1",{children:"View Post"})}),Object(V.jsx)("div",{className:_e.a.parentContainer,children:Object(V.jsx)(ae,{className:_e.a.container,style:{paddingBottom:"20px"},children:Object(V.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(V.jsxs)("div",{style:{display:"flex",flexGrow:1,justifyContent:"space-between",width:"100%"},children:[Object(V.jsxs)("div",{className:_e.a.inputContainer,children:[Object(V.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(V.jsx)("label",{children:"Title"})}),Object(V.jsx)("label",{className:_e.a.textLabel,children:b.title})]}),Object(V.jsxs)("div",{className:_e.a.categoryContainer,children:[Object(V.jsx)("div",{className:_e.a.labelContainer,children:Object(V.jsx)("div",{style:{display:"flex"},children:Object(V.jsx)("label",{children:"Categories"})})}),Object(V.jsx)("div",{className:_e.a.tagsContainer,children:x.map((function(e){return Object(V.jsx)("label",{className:_e.a.tagLabel,children:e.name},e.id)}))})]})]}),Object(V.jsxs)("div",{className:_e.a.inputContainer,children:[Object(V.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(V.jsx)("label",{children:"Article"})}),Object(V.jsx)("div",{style:{overflowY:"auto",maxHeight:"70vh"},children:Object(V.jsx)("div",{className:_e.a.articleLabel,ref:n,children:b.title})})]}),Object(V.jsxs)("div",{className:_e.a.actions,children:[t&&Object(V.jsx)(je,{title:"Edit",onClick:function(){s.push("/posts/edit/".concat(d))},style:{marginRight:"10px"}}),t&&Object(V.jsx)(je,{title:"Delete",onClick:function(){o.callSetConfirm('Do you want to delete the post with title "'.concat(b.title,'"'))},style:{marginRight:"10px"}}),Object(V.jsx)(je,{title:"Cancel",type:"button",onClick:function(){s.goBack()},style:{marginRight:"10px"}})]})]})})})]})]}):Object(V.jsx)(ae,{style:{height:"50%",width:"50%",margin:"auto"},children:Object(V.jsx)("div",{style:{margin:"auto",height:"100%",display:"flex",alignItems:"center",textAlign:"center",justifyContent:"center"},children:Object(V.jsx)("h2",{style:{width:"50%"},children:"Post not found"})})})},Te=function(e){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("h1",{children:" This is heading"}),Object(V.jsx)(Ae,{})]})},Ie=n(80),Re=n.n(Ie),De=n(96),Ue=n.n(De),Fe=function(e){console.log("item rerendered");var t=Object(te.h)(),n=new URLSearchParams(t.search).get("catId");console.log("catId",n);var r=Object(te.g)();return console.log(e.isActive),Object(V.jsx)("div",{className:"".concat(Ue.a.itemContainer," ").concat(e.isActive?Ue.a.active:""),onClick:function(e){r.push("/posts?catId=".concat(e))}.bind(undefined,e.id),children:Object(V.jsx)("h4",{children:e.name})})},We=function(){var e=Object(te.g)(),t=Object(te.h)(),n=new URLSearchParams(t.search).get("catId");console.log(n);var r=Object(G.c)((function(e){return e.userPosts.categories}));console.log(n),console.log(r);return Object(V.jsxs)("div",{className:Re.a.container,children:[Object(V.jsx)("div",{className:"".concat(Re.a.ItemContainer," ").concat(n?"":Re.a.active),onClick:function(){e.replace("/posts")},children:Object(V.jsx)("h4",{children:"All"})}),r.map((function(e){return Object(V.jsx)(Fe,{isActive:n==e.id,id:e.id,name:e.name},e.id)}))]})},Me=n(42),Be=n.n(Me),Ve=(n(158),function(e){var t=Object(te.g)(),n=Object(r.useRef)(),a=Object(r.useContext)(X);Object(r.useEffect)((function(){n.current.innerHTML=Le(e.article)}),[]);var c=Object(G.c)((function(e){return e.userPosts.categories})),i=function(e,t){return t.filter((function(t){return e.includes(t.id)}))}(e.tags,c),s=Object(G.c)((function(e){return e.userPosts.users})).find((function(t){return t.id==e.uid}));return Object(V.jsxs)(V.Fragment,{children:[e.deleteAllowed&&Object(V.jsx)(Pe,{confirmTitle:"Delete",onConfirm:e.onConfirm.bind(undefined,e.uid,e.id)}),Object(V.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"relative",flexGrow:0,marginTop:"30px",cursor:"pointer"},onClick:function(){t.push("posts/view/".concat(e.id,"?deleteAllowed=").concat(e.deleteAllowed))},children:[Object(V.jsxs)("h2",{children:[e.title,e.deleteAllowed&&Object(V.jsx)("span",{className:Be.a.editAction,onClick:function(n){n.stopPropagation(),t.push("/posts/edit/".concat(e.id))},style:{position:"absolute",cursor:"pointer",right:"20px",color:"rgb(190, 211, 212)"},children:Object(V.jsx)("i",{class:"far fa-edit ".concat(Be.a.edit)})}),e.deleteAllowed&&Object(V.jsx)("span",{className:Be.a.deleteAction,onClick:function(t){t.stopPropagation(),a.callSetConfirm('Do you want to delete the post with title "'.concat(e.title,'"'))},style:{position:"absolute",cursor:"pointer",right:0,color:"rgb(190, 211, 212)"},children:Object(V.jsx)("i",{className:"far fa-trash-alt ".concat(Be.a.delete)})})]}),Object(V.jsxs)("div",{className:Be.a.container,children:[Object(V.jsx)("hr",{}),Object(V.jsx)("ul",{children:i.map((function(e){return Object(V.jsx)("li",{children:e.name},e.id)}))}),Object(V.jsx)("div",{ref:n,className:Be.a.article}),Object(V.jsxs)("div",{className:Be.a.author,children:[Object(V.jsx)("span",{className:Be.a.user,children:s.name}),Object(V.jsx)("span",{children:"--"})]})]})]})]})}),qe=function(e){var t=Object(G.b)(),n=Object(r.useContext)(X),a=function(){var r=Object(u.a)(l.a.mark((function r(a,c){var i,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(i=Ee(c,e.posts)).forEach(function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t(Q.deleteCategories(i)),r.next=5,y(a,c);case 5:s=r.sent,console.log(s),t(Q.deletePosts({uid:a,id:c})),n.clearConfirm();case 9:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();return Object(V.jsx)("div",{style:{width:"100%",display:"flex",paddingTop:"20px",flexDirection:"row",justifyContent:"space-evenly",alignItems:"flex-start",gap:"20px, 30px",flexWrap:"wrap"},children:e.posts.map((function(e){return Object(V.jsx)(Ve,{article:e.article,deleteAllowed:n.uid===e.uid,uid:e.uid,id:e.id,title:e.title,tags:e.tags,onConfirm:a},e.id)}))})},He=function(e){var t=Object(te.h)(),n=new URLSearchParams(t.search).get("catId"),r=Object(G.c)((function(e){return e.userPosts.posts})),a=r;return n&&(a=r.filter((function(e){return e.tags.includes(n)}))),console.log("posts",a),Object(V.jsxs)("div",{style:{flex:1,display:"flex"},children:[Object(V.jsx)(We,{}),Object(V.jsx)(qe,{posts:a})]})},Je=function(){return Object(V.jsx)(He,{})},ze=n(52),Xe=n.n(ze),Ge=n(143),Ye=n.n(Ge),Ze=(n(159),n(81)),Ke=n.n(Ze),Qe=function(e){var t=a.a.createRef(),n=Object(r.useState)({tags:e.tags||[{id:1,name:"Apples"},{id:2,name:"Pears"}],suggestions:e.suggestions||[{id:3,name:"Bananas"},{id:4,name:"Mangos"},{id:5,name:"Lemons"},{id:6,name:"Apricots"}]}),c=Object(d.a)(n,2),i=c[0],s=c[1];return Object(V.jsxs)("div",{className:Ke.a.container,children:[Object(V.jsx)("div",{className:Ke.a.labelContainer,children:Object(V.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(V.jsx)("label",{children:e.title})})}),Object(V.jsx)(Ye.a,{placeholderText:e.placeholderText||"Enter a value",ref:t,minQueryLength:1,tags:i.tags,suggestions:i.suggestions,onDelete:function(t){var n=i.tags.slice(0);n.splice(t,1),s((function(e){return Object(j.a)(Object(j.a)({},e),{},{tags:Object(Y.a)(n)})})),e.onTagsChanged(n)},allowNew:!0,onAddition:function(t){var n=[].concat(i.tags,t);s((function(e){return Object(j.a)(Object(j.a)({},e),{},{tags:Object(Y.a)(n)})})),e.onTagsChanged(n)},className:Ke.a.reactTags})]})},$e=n(62),et=n(144),tt=n(145),nt=n.n(tt),rt=(n(254),n(255),n(82)),at=n.n(rt),ct=function(e){Object(r.useRef)();var t=Object(r.useState)((function(){return $e.EditorState.createEmpty()})),n=Object(d.a)(t,2),a=n[0],c=n[1];e.html;return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("div",{className:at.a.richTextContainer,children:[Object(V.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(V.jsx)("label",{style:{margin:0,padding:0,paddingBottom:"10px"},children:e.title})}),Object(V.jsx)("div",{className:"editor",children:Object(V.jsx)(et.Editor,{editorState:a,onEditorStateChange:function(t){c(t),e.setHtml(nt()(Object($e.convertToRaw)(a.getCurrentContent())))},editorClassName:at.a.editor,wrapperClassName:at.a.wrapper,toolbar:{inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0},image:{uploadCallback:function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("POST","https://api.imgur.com/3/image"),r.setRequestHeader("Authorization","Client-ID ##clientid##");var a=new FormData;a.append("image",e),r.send(a),r.addEventListener("load",(function(){var e=JSON.parse(r.responseText);console.log(e),t(e)})),r.addEventListener("error",(function(){var e=JSON.parse(r.responseText);console.log(e),n(e)}))}))},alt:{present:!0,mandatory:!0}}}})})]})})},it=function(){var e=Object(G.c)((function(e){return e.userPosts.categories})),t=Object(G.b)(),n=[],a=Object(te.g)(),c=Object(r.useState)(""),i=Object(d.a)(c,2),s=i[0],o=i[1],p=Object(r.useState)(""),b=Object(d.a)(p,2),f=b[0],x=b[1],O=Object(r.useState)([]),h=Object(d.a)(O,2),g=h[0],m=h[1],v=Object(r.useContext)(X),_=function(e){var t=[];return e.forEach((function(e){t.includes(e.name)||t.push(e.name)})),t},y=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(ee.a)(t),e.prev=2,a.s();case 4:if((c=a.n()).done){e.next=19;break}return i=c.value,e.prev=6,e.next=9,w(i);case 9:r=e.sent,n.push(r),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),v.callSetError(e.t0),e.abrupt("return");case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(2),a.e(e.t1);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27],[6,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(r){var c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),c=[],i=_(0==g.length?n:g),e.next=5,y(i);case 5:return c=e.sent,t(Q.addCategories(c)),o={tags:c,title:s,article:(l=f,l.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"})))},e.prev=8,e.next=11,N(v.uid,o);case 11:t(Q.addPost(Object(j.a)({uid:v.uid},o))),e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(8),v.callSetError(e.t0),e.abrupt("return");case 19:a.push("/");case 21:case"end":return e.stop()}var l}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:Xe.a.content,children:[Object(V.jsx)(ae,{className:Xe.a.title,children:Object(V.jsx)("h1",{children:"Add Post"})}),Object(V.jsx)("div",{className:Xe.a.parentContainer,children:Object(V.jsx)(ae,{className:Xe.a.container,style:{paddingBottom:"20px"},children:Object(V.jsxs)("form",{onSubmit:C,children:[Object(V.jsxs)("div",{className:Xe.a.firstRow,children:[Object(V.jsx)(le,{id:"text",type:"text",placeholder:"Enter title of the post",onChange:function(e){o(e.target.value)},value:s,title:"Title",required:!0,inputContainerStyle:{flexDirection:"column"}}),Object(V.jsx)(Qe,{title:"Select Categories",tags:n,suggestions:e,onTagsChanged:function(e){m(e)}})]}),Object(V.jsx)(ct,{title:"Article",html:f,setHtml:x}),Object(V.jsxs)("div",{className:Xe.a.actions,children:[Object(V.jsx)(je,{title:"Save",onClick:function(){},style:{marginRight:"10px"}}),Object(V.jsx)(je,{title:"Cancel",type:"button",onClick:function(){v.clearError(),a.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},st=function(){return Object(V.jsx)(it,{})},ot=function(){return Object(V.jsx)("div",{})},lt=n(56),ut=n.n(lt),dt=function(e){var t=Object(r.useContext)(X);console.log(t.isLoggedIn);var n=t.isLoggedIn?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("li",{children:Object(V.jsx)(s.b,{to:"/posts/newPost",children:Object(V.jsx)(je,{title:"New Post",onClick:function(){},style:{width:"10vw"}})})}),Object(V.jsx)("li",{children:Object(V.jsx)(je,{title:"Sign Out",onClick:t.signOff,style:{width:"10vw"}})})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("li",{children:Object(V.jsx)(s.b,{to:"/signup",children:Object(V.jsx)(je,{title:"Sign Up",onClick:t.signOff,style:{width:"10vw"}})})}),Object(V.jsx)("li",{children:Object(V.jsx)(s.b,{to:"/login",children:Object(V.jsx)(je,{title:"Login",onClick:t.signOff,style:{width:"10vw"}})})})]}),a=!!e.imageUrl?Object(V.jsx)("img",{className:ut.a.logo,src:e.imageUrl,alt:e.title}):Object(V.jsx)("span",{className:ut.a.logo,style:{display:"inline-block"},children:e.title});return Object(V.jsxs)("div",{className:ut.a.container,children:[Object(V.jsx)("div",{className:ut.a.containerLogo,children:Object(V.jsxs)(s.b,{to:"/",children:[" ",a]})}),Object(V.jsx)("h1",{children:" User Posts"}),Object(V.jsx)("div",{children:Object(V.jsx)("nav",{children:Object(V.jsx)("ul",{className:ut.a.containerNav,children:n})})})]})},jt=function(e){var t=Object(r.useContext)(X).error;return t&&t.message?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Se,{onClose:e.onClose}),Object(V.jsx)(we,{header:Object(V.jsx)("h1",{style:{color:"white",fontWeight:"bold",padding:"5px",width:"100%"},children:"Some error occurred"}),actions:Object(V.jsx)(je,{title:"Close",onClick:e.onClose,style:{fontWeight:"bold"}}),bodyStyle:{color:"red"},onClose:e.onClose,children:Object(V.jsx)("p",{style:{backgroundColor:"white",padding:"10px",borderRadius:"5px",border:"2px solid black"},children:t.message.replace(/Firebase:/g,"")})})]}):null},pt=function(e){return Object(V.jsx)("div",{style:{flex:1,alignSelf:"center",display:"flex",flexDirection:"column",width:"100vw"},children:e.children})};var bt=function(){var e=Object(G.b)();Object(r.useEffect)((function(){var t=function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:n=t.sent,e(Q.loadCategories(n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(u.a)(l.a.mark((function t(){var n,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,T();case 3:n=t.sent,e(Q.loadUsers(n)),r=Object(ee.a)(n),t.prev=6,c=l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.value,t.next=3,R(n.id);case 3:r=t.sent,e(Q.loadPosts(r.map((function(e){return Object(j.a)({uid:n.id},e)}))));case 5:case"end":return t.stop()}}),t)})),r.s();case 9:if((a=r.n()).done){t.next=13;break}return t.delegateYield(c(),"t0",11);case 11:t.next=9;break;case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(6),r.e(t.t1);case 18:return t.prev=18,r.f(),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[6,15,18,21]])})));return function(){return t.apply(this,arguments)}}();t(),n()}),[e]);var t=Object(r.useContext)(X),n=t.isLoggedIn?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(te.b,{path:"/posts/newPost",exact:!0,children:Object(V.jsx)(st,{})}),Object(V.jsx)(te.b,{path:"/posts/edit/:id",exact:!0,children:Object(V.jsx)(ot,{})})]}):null;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(jt,{onClose:function(){return t.clearError()}}),Object(V.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Object(V.jsx)(dt,{title:"User Posts",imageUrl:"/blog.jfif"}),Object(V.jsx)(pt,{children:Object(V.jsxs)(te.d,{children:[Object(V.jsx)(te.b,{path:"/posts",exact:!0,children:Object(V.jsx)(Je,{})}),Object(V.jsx)(te.b,{path:"/",exact:!0,children:Object(V.jsx)(te.a,{to:"/posts"})}),Object(V.jsx)(te.b,{path:"/signup",children:Object(V.jsx)(Oe,{})}),Object(V.jsx)(te.b,{path:"/login",children:Object(V.jsx)(me,{})}),Object(V.jsx)(te.b,{path:"/posts/view/:postId",children:Object(V.jsx)(Te,{})}),n]})})]})]})};i.a.render(Object(V.jsx)(G.a,{store:$,children:Object(V.jsx)(z,{children:Object(V.jsx)(s.a,{children:Object(V.jsx)(bt,{})})})}),document.getElementById("root"))},28:function(e,t,n){e.exports={contentContainer:"ViewPost_contentContainer__1vClT",tagLabel:"ViewPost_tagLabel__Enj0R",content:"ViewPost_content__1gqI0",title:"ViewPost_title__2u8Qz",parentContainer:"ViewPost_parentContainer__1LzYV",categoryContainer:"ViewPost_categoryContainer__2EbRV",container:"ViewPost_container__3gdgx",textLabel:"ViewPost_textLabel__2BVWE",inputContainer:"ViewPost_inputContainer__W6lwb",actions:"ViewPost_actions__2A-_1",articleLabel:"ViewPost_articleLabel__AFoCW"}},42:function(e,t,n){e.exports={deleteAction:"Post_deleteAction__21U8d",editAction:"Post_editAction__2fh5P",edit:"Post_edit__2FGXk",delete:"Post_delete__lXlnM",user:"Post_user__3JLKz",author:"Post_author__21ai3",article:"Post_article__1Wj_m",container:"Post_container__19ZOW"}},52:function(e,t,n){e.exports={content:"AddPost_content__2d9Hb",title:"AddPost_title__3C7qy",parentContainer:"AddPost_parentContainer__1143G",firstRow:"AddPost_firstRow__2ZwXU",container:"AddPost_container__FStfg",inputContainer:"AddPost_inputContainer__n2vjo",input:"AddPost_input__1BqZx",actions:"AddPost_actions__3_Ld8"}},55:function(e,t,n){e.exports={container:"Modal_container__3cGOI","modal-container":"Modal_modal-container__2l8su","modal-header":"Modal_modal-header__1MJC1","modal-body":"Modal_modal-body__2kJKa","modal-footer":"Modal_modal-footer__2rLty"}},56:function(e,t,n){e.exports={container:"Layout_container__3JcJZ",containerLogo:"Layout_containerLogo__3WdLM",containerNav:"Layout_containerNav__118kZ",logo:"Layout_logo__3iCfm"}},79:function(e,t,n){e.exports={"image-container":"ImageUpload_image-container__S2-Pb","button-container":"ImageUpload_button-container__1WJDd"}},80:function(e,t,n){e.exports={container:"CategoriesList_container__3yrEm",active:"CategoriesList_active__3Dgc8"}},81:function(e,t,n){e.exports={container:"AutoComplete_container__1WOpD",reactTags:"AutoComplete_reactTags__5FuH5",labelContainer:"AutoComplete_labelContainer__2d16O"}},82:function(e,t,n){e.exports={editor:"RichText_editor__xR2ML","DraftEditor-root":"RichText_DraftEditor-root__3n0e2",wrapper:"RichText_wrapper__2TeGH",richTextContainer:"RichText_richTextContainer__2l_3T"}},94:function(e,t,n){e.exports={inputContainer:"Input_inputContainer__2_irD",input:"Input_input__FrfsP"}},96:function(e,t,n){e.exports={itemContainer:"CategoryItem_itemContainer__BiNt3",active:"CategoryItem_active__3bd-H",container:"CategoryItem_container__3G0AW"}}},[[256,1,2]]]);
//# sourceMappingURL=main.681ddff1.chunk.js.map