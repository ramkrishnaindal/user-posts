(this["webpackJsonpuser-posts"]=this["webpackJsonpuser-posts"]||[]).push([[0],{138:function(e,t,n){e.exports={card:"Card_card__fXxBI"}},139:function(e,t,n){e.exports={btn:"Button_btn__2OU2l"}},141:function(e,t,n){e.exports={backdrop:"Backdrop_backdrop__1_XCN"}},155:function(e,t,n){},158:function(e,t,n){},24:function(e,t,n){e.exports={content:"SignupComponent_content__-xS3c",title:"SignupComponent_title__3Y18q",parentContainer:"SignupComponent_parentContainer__3pl2j",container:"SignupComponent_container__Nfpou",inputContainer:"SignupComponent_inputContainer__1L_WW",imageContainer:"SignupComponent_imageContainer__27QWb",input:"SignupComponent_input__1OX9u",actions:"SignupComponent_actions__3CL6e"}},255:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n.n(r),c=n(60),s=n.n(c),i=n(22),o=n(0),l=n.n(o),u=n(1),d=n(11),j=n(13),p=n(137),b=n(19),f=n(64),O=n(41),x=Object(p.a)({apiKey:"AIzaSyA0t-XHWc3AonmYat7_pEIiTxm99rNqEyI",authDomain:"user-posts-9df11.firebaseapp.com",databaseURL:"https://user-posts-9df11-default-rtdb.firebaseio.com",projectId:"user-posts-9df11",storageBucket:"user-posts-9df11.appspot.com",messagingSenderId:"70798554958",appId:"1:70798554958:web:a9ac5ebfd7d2ec5629101f"}),h=Object(b.f)(x);function g(){return m.apply(this,arguments)}function m(){return(m=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(b.g)(Object(b.b)(h,"categories")),e.next=3,Object(b.e)(t);case 3:if(0!=(n=e.sent).size){e.next=8;break}return e.abrupt("return",[]);case 8:return r=[],n.forEach((function(e){r.push(Object(j.a)({id:e.id},e.data()))})),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)(Object(b.d)(h,"categories",t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)(Object(b.d)(h,"users/".concat(t,"/posts/").concat(n)));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(l.a.mark((function e(t){var n,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.g)(Object(b.b)(h,"categories"),Object(b.j)("name","==",t)),e.next=3,Object(b.e)(n);case 3:if(0!=(r=e.sent).size){e.next=13;break}return e.next=8,Object(b.a)(Object(b.b)(h,"categories"),{name:t});case 8:return a=e.sent,e.abrupt("return",a.id);case 13:return r.forEach((function(e){c=e.id})),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.a)(Object(b.b)(h,"users/".concat(t,"/posts")),n);case 3:return r=e.sent,e.abrupt("return",r.id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.h)(Object(b.d)(h,"users",t),n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(b.i)(Object(b.d)(h,"users",t),n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(b.b)(h,"users"),e.next=3,Object(b.e)(t);case 3:return n=e.sent,r=n.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.b)(h,"users/".concat(t,"/posts")),e.next=3,Object(b.e)(n);case 3:return r=e.sent,a=r.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=Object(O.b)();Object(O.c)(U,(function(e){e?(localStorage.getItem("user_token")||localStorage.setItem("user_token",e.accessToken),localStorage.getItem("user_id")||localStorage.setItem("user_id",e.uid)):(localStorage.getItem("user_token")&&localStorage.removeItem("user_token"),localStorage.getItem("user_id")||localStorage.removeItem("user_id"))}));var F=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(O.b)(),e.next=4,Object(O.a)(r,t,n);case 4:return a=e.sent,e.abrupt("return",a.user);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(null!=t){var a=Object(f.b)(),c=t.name.split(".")[(t.name+"").split(".").length-1],s=Object(f.c)(a,"".concat(n,"/").concat(t.name)),i={contentType:"image/".concat(c)},o=Object(f.d)(s,t,i);o.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){switch(e.code){case"storage/unauthorized":case"storage/canceled":case"storage/unknown":r(e)}}),(function(){Object(f.a)(o.snapshot.ref).then((function(t){console.log("File available at",t),e(t)}))}))}})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(O.b)(),e.next=4,Object(O.d)(r,t,n);case 4:return a=e.sent,e.abrupt("return",a.user);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0.code,e.t0.message),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(O.b)(),e.next=4,Object(O.e)(r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.code,e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),B=n(4),H={isLoggedIn:!1,token:"",uid:"",error:{code:"",message:""},confirm:{message:""},callSetError:function(e){},login:function(e,t){},signup:function(e,t){},signOff:function(){},callSetConfirm:function(e){},clearConfirm:function(){},clearError:function(){}},J=Object(r.createContext)(H),X=J.Provider,z=function(e){Object(r.useEffect)((function(){var e=localStorage.getItem("user_token");e&&j(e);var t=localStorage.getItem("user_id");t&&O(t),e&&c(!0)}),[]);var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),o=i[0],j=i[1],p=Object(r.useState)(""),b=Object(d.a)(p,2),f=b[0],O=b[1],x=Object(r.useState)(),h=Object(d.a)(x,2),g=h[0],m=h[1],v=Object(r.useState)(""),_=Object(d.a)(v,2),y=_[0],C=_[1];Object(r.useEffect)((function(){localStorage.setItem("user_token",o),localStorage.setItem("user_id",f)}),[o]);var w=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,n);case 2:if((r=e.sent).code){e.next=10;break}return c(!0),j(r.accessToken),O(r.uid),e.abrupt("return",r);case 10:return m(r),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t,n);case 2:if((r=e.sent).code){e.next=10;break}return c(!0),j(r.accessToken),O(r.uid),e.abrupt("return",r);case 10:return m(r),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:c(!1),j("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsx)(X,{value:{isLoggedIn:a,login:w,signUp:k,callSetError:function(e){return m(e)},token:o,uid:f,error:g,confirm:{message:y},clearConfirm:function(){C("")},callSetConfirm:function(e){return C(e)},signOff:S,clearError:function(){m(null)}},children:e.children})},G=J,Z=n(26),K=n(18),Y=n(96),Q=Object(Y.b)({name:"userAndPosts",initialState:{categories:[],users:[],posts:[]},reducers:{loadCategories:function(e,t){e.categories=t.payload},addCategories:function(e,t){var n=t.payload,r=e.categories.map((function(e){return e.id})),a=n.filter((function(e){return!r.includes(e.id)}));e.categories=[].concat(Object(K.a)(e.categories),Object(K.a)(a))},deleteCategories:function(e,t){var n=t.payload;e.categories=e.categories.filter((function(e){return!n.includes(e.id)}))},deletePosts:function(e,t){var n=t.payload.uid,r=t.payload.id;e.posts=e.posts.filter((function(e){return!(e.uid===n&&e.id===r)}))},addPost:function(e,t){e.posts=[].concat(Object(K.a)(e.posts),[t.payload])},loadUsers:function(e,t){e.users=t.payload},loadPosts:function(e,t){e.posts=[].concat(Object(K.a)(e.posts),Object(K.a)(t.payload))}}}),V=Q.actions,$=Object(Y.a)({reducer:{userPosts:Q.reducer},devTools:!0}),ee=n(8),te=(n(155),n(21)),ne=n(138),re=n.n(ne),ae=function(e){var t="".concat(re.a.card," ").concat(e.className?e.className:"");return Object(B.jsx)("div",{className:t,style:Object(j.a)({},e.style),children:e.children})},ce=n(24),se=n.n(ce),ie=n(93),oe=n.n(ie),le=function(e){var t="".concat(oe.a.input," ").concat(e.className),n=Object(B.jsx)("input",Object(j.a)({style:Object(j.a)({},e.style),id:e.id,className:t,value:e.value,name:e.name,onChange:e.onChange},e));return e.isRef&&(n=Object(B.jsx)("input",Object(j.a)({style:Object(j.a)({},e.style),id:e.id,className:t,name:e.name,ref:e.inputRef},e))),Object(B.jsxs)("div",{className:oe.a.inputContainer,style:Object(j.a)({},e.inputContainerStyle||null),children:[Object(B.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(B.jsx)("label",{htmlFor:e.id,style:Object(j.a)({},e.inputContainerLabelStyle||null),children:e.title})}),n]})},ue=n(139),de=n.n(ue),je=function(e){var t="".concat(e.className," ").concat(de.a.btn),n=Object(B.jsx)("button",Object(j.a)(Object(j.a)({className:t,onClick:e.onClick,style:Object(j.a)({},e.style)},e),{},{children:e.title}));return e.isLink&&(n=Object(B.jsx)(i.b,Object(j.a)(Object(j.a)({to:e.to,className:t,style:Object(j.a)({},e.style)},e),{},{children:e.title}))),n},pe=n(78),be=n.n(pe),fe=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],c=n[1],s=new FileReader;s.addEventListener("load",(function(){c(s.result)}),!1);var i=Object(r.useRef)();return Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{className:be.a["image-container"],children:a&&Object(B.jsx)("img",{src:a,alt:e.imageTitle,title:e.imageTitle,className:be.a.image})}),Object(B.jsx)("input",{type:"file",accept:".png,.jpeg,.jpg,.bmp",style:{display:"none"},ref:i,onChange:function(t){t.target.files[0]&&(e.onFileReceived(t.target.files[0]),t.target.files[0]&&s.readAsDataURL(t.target.files[0]))}}),Object(B.jsxs)("div",{className:be.a["button-container"],children:[Object(B.jsx)("label",{children:e.imageTitle}),Object(B.jsx)(je,{title:"Upload",onClick:function(){return i.current.click()},type:"button"})]})]})},Oe=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(d.a)(c,2),i=s[0],o=s[1],j=Object(te.g)(),p=Object(r.useState)(""),b=Object(d.a)(p,2),f=b[0],O=b[1],x=Object(r.useState)(""),h=Object(d.a)(x,2),g=h[0],m=h[1],v=Object(r.useContext)(G),_=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,v.signUp(n,f);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),v.callSetError(e.t0),e.abrupt("return");case 11:return e.prev=11,e.next=14,P(r.uid,{name:g});case 14:e.next=21;break;case 16:return e.prev=16,e.t1=e.catch(11),v.callSetError(e.t1),r&&j.replace("/"),e.abrupt("return");case 21:return e.prev=21,e.next=24,M(i,"".concat(r.uid,"/images"));case 24:a=e.sent,e.next=32;break;case 27:return e.prev=27,e.t2=e.catch(21),v.callSetError(e.t2),r&&j.replace("/"),e.abrupt("return");case 32:if(!a){e.next=43;break}return e.prev=33,e.next=36,I(r.uid,{profileImageUrl:a});case 36:r&&j.replace("/"),e.next=43;break;case 39:e.prev=39,e.t3=e.catch(33),v.callSetError(e.t3),r&&j.replace("/");case 43:case"end":return e.stop()}}),e,null,[[1,7],[11,16],[21,27],[33,39]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:se.a.content,children:[Object(B.jsx)(ae,{className:se.a.title,children:Object(B.jsx)("h1",{children:" Sign Up"})}),Object(B.jsx)("div",{className:se.a.parentContainer,children:Object(B.jsx)(ae,{className:se.a.container,style:{paddingBottom:"20px"},children:Object(B.jsxs)("form",{onSubmit:_,children:[Object(B.jsx)("div",{className:se.a.inputContainer,children:Object(B.jsx)(le,{id:"name",type:"name",placeholder:"Name",onChange:function(e){m(e.target.value)},value:g,title:"Name",inputContainerLabelStyle:{paddingTop:"10px"},required:!0})}),Object(B.jsx)("div",{className:se.a.inputContainer,children:Object(B.jsx)(le,{id:"email",type:"email",placeholder:"E Mail",onChange:function(e){a(e.target.value)},value:n,title:"E Mail",inputContainerLabelStyle:{paddingTop:"10px"},required:!0})}),Object(B.jsx)("div",{className:se.a.inputContainer,children:Object(B.jsx)(le,{id:"password",type:"password",placeholder:"Password",onChange:function(e){O(e.target.value)},value:f,title:"Password",required:!0})}),Object(B.jsx)("div",{className:se.a.imageContainer,children:Object(B.jsx)(fe,{imageTitle:"Profile image",onFileReceived:function(e){o(e)}})}),Object(B.jsxs)("div",{className:se.a.actions,children:[Object(B.jsx)(je,{title:"Sign up",onClick:function(){},style:{marginRight:"10px"}}),Object(B.jsx)(je,{title:"Cancel",onClick:function(){v.clearError(),j.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},xe=function(){return Object(B.jsx)(Oe,{})},he=function(){var e=Object(te.g)(),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(r.useContext)(G),i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],p=o[1],b=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,s.login(a,j);case 3:t.sent&&e.replace("/");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:se.a.content,children:[Object(B.jsx)(ae,{className:se.a.title,children:Object(B.jsx)("h1",{children:" Login"})}),Object(B.jsx)("div",{className:se.a.parentContainer,children:Object(B.jsx)(ae,{className:se.a.container,style:{paddingBottom:"20px"},children:Object(B.jsxs)("form",{onSubmit:b,children:[Object(B.jsx)(le,{id:"email",type:"email",placeholder:"E Mail",onChange:function(e){c(e.target.value)},value:a,title:"E Mail",inputContainerLabelStyle:{paddingTop:"10px"},required:!0}),Object(B.jsx)(le,{id:"email",type:"password",placeholder:"Password",title:"Password",onChange:function(e){p(e.target.value)},value:j,inputContainerLabelStyle:{paddingTop:"10px"},required:!0}),Object(B.jsxs)("div",{className:se.a.actions,children:[Object(B.jsx)(je,{title:"Login",onClick:function(){},style:{marginRight:"10px"}}),Object(B.jsx)(je,{title:"Cancel",type:"button",onClick:function(){s.clearError(),e.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},ge=function(){return Object(B.jsx)(he,{})},me=n(79),ve=n.n(me),_e=n(95),ye=n.n(_e),Ce=function(e){console.log("item rerendered");var t=Object(te.h)(),n=new URLSearchParams(t.search).get("catId");console.log("catId",n);var r=Object(te.g)();return console.log(e.isActive),Object(B.jsx)("div",{className:"".concat(ye.a.ItemContainer," ").concat(e.isActive?ye.a.active:""),onClick:function(e){r.push("/posts?catId=".concat(e))}.bind(undefined,e.id),children:Object(B.jsx)("h4",{children:e.name})})},we=function(){var e=Object(te.g)(),t=Object(te.h)(),n=new URLSearchParams(t.search).get("catId");console.log(n);var r=Object(Z.c)((function(e){return e.userPosts.categories}));console.log(n),console.log(r);return Object(B.jsxs)("div",{className:ve.a.container,children:[Object(B.jsx)("div",{className:"".concat(ve.a.ItemContainer," ").concat(n?"":ve.a.active),onClick:function(){e.replace("/posts")},children:Object(B.jsx)("h4",{children:"All"})}),r.map((function(e){return Object(B.jsx)(Ce,{isActive:n==e.id,id:e.id,name:e.name},e.id)}))]})},ke=function(e,t){var n=[],r=t.filter((function(t){return t.id!=e})),a=t.find((function(t){return t.id==e}));return a&&a.tags&&a.tags.length>0&&a.tags.forEach((function(e){var t=!0;r.forEach((function(n){t=t&&!n.tags.includes(e)})),t&&n.push(e)})),n},Se=n(50),Ne=n.n(Se),Pe=(n(157),n(54)),Ee=n.n(Pe),Ie=function(e){return Object(B.jsx)("div",{className:Ee.a.container,onClick:e.onClose,children:Object(B.jsxs)("div",{className:Ee.a["modal-container"],onClick:function(e){return e.stopPropagation()},children:[Object(B.jsx)("div",{className:Ee.a["modal-header"],style:Object(j.a)({},e.headerStyle),children:e.header}),Object(B.jsx)("div",{style:Object(j.a)(Object(j.a)({},e.bodyStyle),{},{display:"flex",justifyContent:"center",alignItems:"center"}),className:Ee.a["modal-body"],children:e.children}),Object(B.jsx)("div",{className:Ee.a["modal-footer"],children:e.actions})]})})},Le=n(141),Te=n.n(Le),Re=function(e){return Object(B.jsx)("div",{onClick:e.onClose,className:Te.a.backdrop})},Ae=function(e){var t=Object(r.useContext)(G),n=t.confirm,a=t.clearConfirm;return n&&n.message?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Re,{onClose:a}),Object(B.jsx)(Ie,{header:Object(B.jsx)("h1",{style:{color:"white",fontWeight:"bold",padding:"5px",width:"100%"},children:"Are you Sure?"}),actions:Object(B.jsxs)("div",{children:[Object(B.jsx)(je,{title:e.confirmTitle,onClick:e.onConfirm,style:{fontWeight:"bold",color:"red"}}),Object(B.jsx)(je,{title:"Close",onClick:a,style:{fontWeight:"bold"}})]}),bodyStyle:{color:"red"},onClose:a,children:Object(B.jsx)("p",{style:{backgroundColor:"white",padding:"10px",borderRadius:"5px",border:"2px solid black"},children:n.message})})]}):null},De=function(e){var t=Object(r.useRef)(),n=Object(r.useContext)(G);Object(r.useEffect)((function(){t.current.innerHTML=function(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}(e.article)}),[]);var a=Object(Z.c)((function(e){return e.userPosts.categories})),c=function(e,t){return t.filter((function(t){return e.includes(t.id)}))}(e.tags,a),s=Object(Z.c)((function(e){return e.userPosts.users})).find((function(t){return t.id==e.uid}));return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Ae,{confirmTitle:"Delete",onConfirm:e.onConfirm.bind(undefined,e.uid,e.id)}),Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:"relative",flexGrow:0,marginTop:"30px"},children:[Object(B.jsxs)("h2",{children:[e.title,Object(B.jsx)("span",{className:Ne.a.actions,onClick:function(){n.callSetConfirm("Do you want to delete the post with title ".concat(e.title))},style:{position:"absolute",cursor:"pointer",right:0,color:"rgb(190, 211, 212)"},children:Object(B.jsx)("i",{className:"far fa-trash-alt ".concat(Ne.a.delete)})})]}),Object(B.jsxs)("div",{className:Ne.a.container,children:[Object(B.jsx)("hr",{}),Object(B.jsx)("ul",{children:c.map((function(e){return Object(B.jsx)("li",{children:e.name},e.id)}))}),Object(B.jsx)("div",{ref:t,className:Ne.a.article}),Object(B.jsxs)("div",{className:Ne.a.author,children:[Object(B.jsx)("span",{className:Ne.a.user,children:s.name}),Object(B.jsx)("span",{children:"--"})]})]})]})]})},Ue=function(e){var t=Object(Z.b)(),n=Object(r.useContext)(G),a=function(){var r=Object(u.a)(l.a.mark((function r(a,c){var s,i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("uid",a),console.log("id",c),(s=ke(c,e.posts)).forEach(function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t(V.deleteCategories(s)),r.next=7,y(a,c);case 7:i=r.sent,console.log(i),t(V.deletePosts({uid:a,id:c})),n.clearConfirm();case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}();return Object(B.jsx)("div",{style:{width:"100%",display:"flex",paddingTop:"20px",flexDirection:"row",justifyContent:"space-evenly",alignItems:"flex-start",gap:"20px, 30px",flexWrap:"wrap"},children:e.posts.map((function(e){return Object(B.jsx)(De,{article:e.article,uid:e.uid,id:e.id,title:e.title,tags:e.tags,onConfirm:a},e.id)}))})},Fe=function(e){var t=Object(te.h)(),n=new URLSearchParams(t.search).get("catId"),r=Object(Z.c)((function(e){return e.userPosts.posts})),a=r;return n&&(a=r.filter((function(e){return e.tags.includes(n)}))),console.log("posts",a),Object(B.jsxs)("div",{style:{flex:1,display:"flex"},children:[Object(B.jsx)(we,{}),Object(B.jsx)(Ue,{posts:a})]})},Me=function(){return Object(B.jsx)(Fe,{})},We=n(51),qe=n.n(We),Be=n(142),He=n.n(Be),Je=(n(158),n(80)),Xe=n.n(Je),ze=function(e){var t=a.a.createRef(),n=Object(r.useState)({tags:e.tags||[{id:1,name:"Apples"},{id:2,name:"Pears"}],suggestions:e.suggestions||[{id:3,name:"Bananas"},{id:4,name:"Mangos"},{id:5,name:"Lemons"},{id:6,name:"Apricots"}]}),c=Object(d.a)(n,2),s=c[0],i=c[1];return Object(B.jsxs)("div",{className:Xe.a.container,children:[Object(B.jsx)("div",{className:Xe.a.labelContainer,children:Object(B.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(B.jsx)("label",{children:e.title})})}),Object(B.jsx)(He.a,{placeholderText:e.placeholderText||"Enter a value",ref:t,minQueryLength:1,tags:s.tags,suggestions:s.suggestions,onDelete:function(t){var n=s.tags.slice(0);n.splice(t,1),i((function(e){return Object(j.a)(Object(j.a)({},e),{},{tags:Object(K.a)(n)})})),e.onTagsChanged(n)},allowNew:!0,onAddition:function(t){var n=[].concat(s.tags,t);i((function(e){return Object(j.a)(Object(j.a)({},e),{},{tags:Object(K.a)(n)})})),e.onTagsChanged(n)},className:Xe.a.reactTags})]})},Ge=n(61),Ze=n(143),Ke=n(144),Ye=n.n(Ke),Qe=(n(253),n(254),n(81)),Ve=n.n(Qe),$e=function(e){Object(r.useRef)();var t=Object(r.useState)((function(){return Ge.EditorState.createEmpty()})),n=Object(d.a)(t,2),a=n[0],c=n[1];e.html;return Object(B.jsx)(B.Fragment,{children:Object(B.jsxs)("div",{className:Ve.a.richTextContainer,children:[Object(B.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:Object(B.jsx)("label",{style:{margin:0,padding:0,paddingBottom:"10px"},children:e.title})}),Object(B.jsx)("div",{className:"editor",children:Object(B.jsx)(Ze.Editor,{editorState:a,onEditorStateChange:function(t){c(t),e.setHtml(Ye()(Object(Ge.convertToRaw)(a.getCurrentContent())))},editorClassName:Ve.a.editor,wrapperClassName:Ve.a.wrapper,toolbar:{inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0},image:{uploadCallback:function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("POST","https://api.imgur.com/3/image"),r.setRequestHeader("Authorization","Client-ID ##clientid##");var a=new FormData;a.append("image",e),r.send(a),r.addEventListener("load",(function(){var e=JSON.parse(r.responseText);console.log(e),t(e)})),r.addEventListener("error",(function(){var e=JSON.parse(r.responseText);console.log(e),n(e)}))}))},alt:{present:!0,mandatory:!0}}}})})]})})},et=function(){var e=Object(Z.b)(),t=[{id:3,name:"English"}],n=Object(te.g)(),a=Object(r.useState)(""),c=Object(d.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(""),p=Object(d.a)(o,2),b=p[0],f=p[1],O=Object(r.useState)([]),x=Object(d.a)(O,2),h=x[0],g=x[1],m=Object(r.useContext)(G),v=function(e){var t=[];return e.forEach((function(e){t.includes(e.name)||t.push(e.name)})),t},_=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(ee.a)(t),e.prev=2,a.s();case 4:if((c=a.n()).done){e.next=19;break}return s=c.value,e.prev=6,e.next=9,w(s);case 9:r=e.sent,n.push(r),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),m.callSetError(e.t0),e.abrupt("return");case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(2),a.e(e.t1);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27],[6,13]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var r=Object(u.a)(l.a.mark((function r(a){var c,i,o;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.preventDefault(),c=[],i=v(0==h.length?t:h),r.next=5,_(i);case 5:return c=r.sent,e(V.addCategories(c)),o={tags:c,title:s,article:(l=b,l.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"})))},r.prev=8,r.next=11,S(m.uid,o);case 11:e(V.addPost(Object(j.a)({uid:m.uid},o))),r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(8),m.callSetError(r.t0),r.abrupt("return");case 19:n.push("/");case 21:case"end":return r.stop()}var l}),r,null,[[8,15]])})));return function(e){return r.apply(this,arguments)}}();return Object(B.jsxs)("div",{className:qe.a.content,children:[Object(B.jsx)(ae,{className:qe.a.title,children:Object(B.jsx)("h1",{children:"Add Post"})}),Object(B.jsx)("div",{className:qe.a.parentContainer,children:Object(B.jsx)(ae,{className:qe.a.container,style:{paddingBottom:"20px"},children:Object(B.jsxs)("form",{onSubmit:y,children:[Object(B.jsxs)("div",{className:qe.a.firstRow,children:[Object(B.jsx)(le,{id:"text",type:"text",placeholder:"Enter title of the post",onChange:function(e){i(e.target.value)},value:s,title:"Title",required:!0,inputContainerStyle:{flexDirection:"column"}}),Object(B.jsx)(ze,{title:"Select Categories",tags:t,suggestions:[{id:3,name:"English"},{id:4,name:"Spain"},{id:5,name:"Italy"}],onTagsChanged:function(e){g(e)}})]}),Object(B.jsx)($e,{title:"Article",html:b,setHtml:f}),Object(B.jsxs)("div",{className:qe.a.actions,children:[Object(B.jsx)(je,{title:"Save",onClick:function(){},style:{marginRight:"10px"}}),Object(B.jsx)(je,{title:"Cancel",type:"button",onClick:function(){m.clearError(),n.replace("/")},style:{marginRight:"10px"}})]})]})})})]})},tt=function(){return Object(B.jsx)(et,{})},nt=function(){return Object(B.jsx)("div",{})},rt=n(55),at=n.n(rt),ct=function(e){var t=Object(r.useContext)(G);console.log(t.isLoggedIn);var n=t.isLoggedIn?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("li",{children:Object(B.jsx)(i.b,{to:"/posts/newPost",children:Object(B.jsx)(je,{title:"New Post",onClick:function(){},style:{width:"10vw"}})})}),Object(B.jsx)("li",{children:Object(B.jsx)(je,{title:"Sign Out",onClick:t.signOff,style:{width:"10vw"}})})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("li",{children:Object(B.jsx)(i.b,{to:"/signup",children:Object(B.jsx)(je,{title:"Sign Up",onClick:t.signOff,style:{width:"10vw"}})})}),Object(B.jsx)("li",{children:Object(B.jsx)(i.b,{to:"/login",children:Object(B.jsx)(je,{title:"Login",onClick:t.signOff,style:{width:"10vw"}})})})]}),a=!!e.imageUrl?Object(B.jsx)("img",{className:at.a.logo,src:e.imageUrl,alt:e.title}):Object(B.jsx)("span",{className:at.a.logo,style:{display:"inline-block"},children:e.title});return Object(B.jsxs)("div",{className:at.a.container,children:[Object(B.jsx)("div",{className:at.a.containerLogo,children:Object(B.jsxs)(i.b,{to:"/",children:[" ",a]})}),Object(B.jsx)("h1",{children:" User Posts"}),Object(B.jsx)("div",{children:Object(B.jsx)("nav",{children:Object(B.jsx)("ul",{className:at.a.containerNav,children:n})})})]})},st=function(e){var t=Object(r.useContext)(G).error;return t&&t.message?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Re,{onClose:e.onClose}),Object(B.jsx)(Ie,{header:Object(B.jsx)("h1",{style:{color:"white",fontWeight:"bold",padding:"5px",width:"100%"},children:"Some error occurred"}),actions:Object(B.jsx)(je,{title:"Close",onClick:e.onClose,style:{fontWeight:"bold"}}),bodyStyle:{color:"red"},onClose:e.onClose,children:Object(B.jsx)("p",{style:{backgroundColor:"white",padding:"10px",borderRadius:"5px",border:"2px solid black"},children:t.message.replace(/Firebase:/g,"")})})]}):null},it=function(e){return Object(B.jsx)("div",{style:{flex:1,alignSelf:"center",display:"flex",flexDirection:"column",width:"100vw"},children:e.children})};var ot=function(){var e=Object(Z.b)();Object(r.useEffect)((function(){var t=function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:n=t.sent,e(V.loadCategories(n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(u.a)(l.a.mark((function t(){var n,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,T();case 3:n=t.sent,e(V.loadUsers(n)),r=Object(ee.a)(n),t.prev=6,c=l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.value,t.next=3,A(n.id);case 3:r=t.sent,e(V.loadPosts(r.map((function(e){return Object(j.a)({uid:n.id},e)}))));case 5:case"end":return t.stop()}}),t)})),r.s();case 9:if((a=r.n()).done){t.next=13;break}return t.delegateYield(c(),"t0",11);case 11:t.next=9;break;case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(6),r.e(t.t1);case 18:return t.prev=18,r.f(),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[6,15,18,21]])})));return function(){return t.apply(this,arguments)}}();t(),n()}),[e]);var t=Object(r.useContext)(G),n=t.isLoggedIn?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(te.b,{path:"/posts/newPost",children:Object(B.jsx)(tt,{})}),Object(B.jsx)(te.b,{path:"/posts/:id",children:Object(B.jsx)(nt,{})})]}):null;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(st,{onClose:function(){return t.clearError()}}),Object(B.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Object(B.jsx)(ct,{title:"User Posts",imageUrl:"/blog.jfif"}),Object(B.jsx)(it,{children:Object(B.jsxs)(te.d,{children:[Object(B.jsx)(te.b,{path:"/",exact:!0,children:Object(B.jsx)(te.a,{to:"/posts"})}),Object(B.jsx)(te.b,{path:"/signup",children:Object(B.jsx)(xe,{})}),Object(B.jsx)(te.b,{path:"/login",children:Object(B.jsx)(ge,{})}),Object(B.jsx)(te.b,{path:"/posts",exact:!0,children:Object(B.jsx)(Me,{})}),n,Object(B.jsx)(te.b,{path:"**",children:Object(B.jsx)(te.a,{to:"/posts"})})]})})]})]})};s.a.render(Object(B.jsx)(Z.a,{store:$,children:Object(B.jsx)(z,{children:Object(B.jsx)(i.a,{children:Object(B.jsx)(ot,{})})})}),document.getElementById("root"))},50:function(e,t,n){e.exports={actions:"Post_actions__1X8t-",delete:"Post_delete__lXlnM",user:"Post_user__3JLKz",author:"Post_author__21ai3",article:"Post_article__1Wj_m",container:"Post_container__19ZOW"}},51:function(e,t,n){e.exports={content:"AddPost_content__2d9Hb",title:"AddPost_title__3C7qy",parentContainer:"AddPost_parentContainer__1143G",firstRow:"AddPost_firstRow__2ZwXU",container:"AddPost_container__FStfg",inputContainer:"AddPost_inputContainer__n2vjo",input:"AddPost_input__1BqZx",actions:"AddPost_actions__3_Ld8"}},54:function(e,t,n){e.exports={container:"Modal_container__3cGOI","modal-container":"Modal_modal-container__2l8su","modal-header":"Modal_modal-header__1MJC1","modal-body":"Modal_modal-body__2kJKa","modal-footer":"Modal_modal-footer__2rLty"}},55:function(e,t,n){e.exports={container:"Layout_container__3JcJZ",containerLogo:"Layout_containerLogo__3WdLM",containerNav:"Layout_containerNav__118kZ",logo:"Layout_logo__3iCfm"}},78:function(e,t,n){e.exports={"image-container":"ImageUpload_image-container__S2-Pb","button-container":"ImageUpload_button-container__1WJDd"}},79:function(e,t,n){e.exports={container:"CategoriesList_container__3yrEm",active:"CategoriesList_active__3Dgc8"}},80:function(e,t,n){e.exports={container:"AutoComplete_container__1WOpD",reactTags:"AutoComplete_reactTags__5FuH5",labelContainer:"AutoComplete_labelContainer__2d16O"}},81:function(e,t,n){e.exports={editor:"RichText_editor__xR2ML","DraftEditor-root":"RichText_DraftEditor-root__3n0e2",wrapper:"RichText_wrapper__2TeGH",richTextContainer:"RichText_richTextContainer__2l_3T"}},93:function(e,t,n){e.exports={inputContainer:"Input_inputContainer__2_irD",input:"Input_input__FrfsP"}},95:function(e,t,n){e.exports={active:"CategoryItem_active__3bd-H",container:"CategoryItem_container__3G0AW"}}},[[255,1,2]]]);
//# sourceMappingURL=main.c7f1a6d9.chunk.js.map