{"version":3,"sources":["components/CategoryItem.module.css","components/UI/Card.module.css","components/shared/Backdrop.module.css","components/ViewPost.module.css","shared/firebase.js","context/app-context.js","store/store.js","components/UI/Card.js","components/UI/Input.js","components/UI/Button.js","components/UI/ImageUpload.js","components/SignupComponent.js","pages/SignUp.js","components/LoginComponent.js","pages/Login.js","components/shared/Modal.js","components/shared/Backdrop.js","components/shared/ConfirmModal.js","shared/utilities.js","components/UI/TextArea.js","components/ViewPost.js","pages/ViewPosts.js","components/CategoryItem.js","components/CategoriesList.js","components/Post.js","components/AllPostsComponent.js","components/Posts.js","pages/AllPosts.js","components/UI/AutoComplete.js","components/UI/RichText.js","components/AddPost.js","pages/AddNewPost.js","components/EditPostComponent.js","pages/EditPost.js","components/shared/Layout.js","components/shared/ErrorModal.js","components/shared/Container.js","App.js","index.js","components/SignupComponent.module.css","components/Post.module.css","components/AddPost.module.css","components/EditPostComponent.module.css","components/shared/Modal.module.css","components/shared/Layout.module.css","components/CategoriesList.module.css","components/UI/Button.module.css","components/UI/ImageUpload.module.css","components/UI/AutoComplete.module.css","components/UI/RichText.module.css","components/UI/Input.module.css","components/UI/TextArea.module.css"],"names":["module","exports","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","getCategories","a","q","query","collection","getDocs","querySnapshot","size","categories","forEach","doc","push","id","data","deleteCategory","deleteDoc","docRef","deletePost","uid","addCategory","addDoc","name","where","addPost","editPost","setDoc","addProfileData","updateProfileData","updateDoc","getUsers","usersCol","usersSnapshot","usersList","docs","map","getUsersPosts","postsCol","postsSnapshot","postsList","auth","getAuth","onAuthStateChanged","user","localStorage","getItem","setItem","accessToken","removeItem","signUp","email","password","createUserWithEmailAndPassword","userCredential","uploadPicture","file","pathToFileDirectory","Promise","resolve","reject","storage","getStorage","fileExt","split","length","storageRef","ref","metadata","contentType","uploadTask","uploadBytesResumable","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","error","code","getDownloadURL","then","downloadURL","logIn","signInWithEmailAndPassword","message","signOff","signOut","initialState","isLoggedIn","token","confirm","callSetError","err","login","signup","callSetConfirm","clearConfirm","clearError","ctx","createContext","Provider","AppProvider","props","useEffect","tokenld","setIdToken","uidls","setIdUid","setLoggedIn","useState","loggedIn","idToken","setError","setConfirm","loginHandler","result","signUpHandler","signOffHandler","value","children","postsSlice","createSlice","users","posts","reducers","loadCategories","action","payload","addCategories","tags","stateCatIDs","cat","tagsToAdd","filter","tag","includes","deleteCategories","IDs","deletePosts","post","statePost","loadUsers","addUser","loadPosts","storeActions","actions","store","configureStore","reducer","userPosts","devTools","Card","classCombine","classes","card","className","style","Input","classNames","input","inputConst","onChange","type","required","isRef","inputRef","placeholder","inputContainer","inputContainerStyle","display","justifyContent","htmlFor","inputContainerLabelStyle","title","Button","btn","onClick","isLink","to","ImageUpload","imageUrl","setImageUrl","reader","FileReader","addEventListener","fileInputRef","useRef","src","alt","imageTitle","image","accept","e","target","files","onFileReceived","readAsDataURL","current","click","SignUpComponent","dispatch","useDispatch","setEmail","setFile","history","useHistory","setPassword","setName","useContext","AppContext","submitHandler","event","preventDefault","alert","profileImageUrl","replace","content","parentContainer","container","paddingBottom","onSubmit","paddingTop","imageContainer","marginRight","SignUp","SignupComponent","LoginComponent","Login","Modal","onClose","stopPropagation","headerStyle","header","bodyStyle","alignItems","Backdrop","backdrop","ConfirmModal","color","fontWeight","padding","width","confirmTitle","onConfirm","backgroundColor","borderRadius","border","encodeStr","rawStr","i","charCodeAt","decodeStr","document","createElement","innerHTML","childNodes","nodeValue","getUniqueTags","tagsToDelete","otherPosts","find","isUnique","otherPost","textarea","forwardRef","ViewPost","isTrueSet","articleRef","commentRef","location","useLocation","deleteAllowed","URLSearchParams","search","get","postId","useParams","useSelector","userPost","article","onConfirmHandler","delRef","userCategories","contentContainer","flexDirection","flexGrow","textLabel","categoryContainer","labelContainer","tagsContainer","tagLabel","overflowY","maxHeight","articleLabel","TextArea","rows","cols","btnPost","goBack","height","margin","textAlign","ViewPosts","CategoryItem","catId","isActive","itemContainer","active","bind","CategoriesList","catgories","ItemContainer","category","Post","catIDs","getUserCategories","position","marginTop","cursor","editAction","right","class","edit","deleteAction","delete","author","AllPostsComponent","tagId","gap","flexWrap","Posts","allPosts","flex","AllPosts","AutoComplete","reactTags","React","createRef","suggestions","tagsState","setTagsState","placeholderText","minQueryLength","onDelete","slice","splice","prevState","onTagsChanged","allowNew","onAddition","concat","RichText","initialContent","EditorState","createEmpty","editorState","setEditorState","initHtml","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","createWithContent","richTextContainer","onEditorStateChange","setHtml","draftToHtml","convertToRaw","getCurrentContent","editorClassName","editor","wrapperClassName","wrapper","toolbar","inline","inDropdown","list","link","uploadCallback","xhr","XMLHttpRequest","open","setRequestHeader","FormData","append","send","response","JSON","parse","responseText","present","mandatory","AddPost","initialTags","setTitle","initialHtmlContent","setInitialHtmlContent","contentLoaded","setContentLoaded","htmlContent","setHtmlContent","setTags","getUniqueCatgoryTags","addTags","tagIdsToAdd","tagIds","docId","firstRow","AddNewPost","EditPostComponent","setInitialTags","initTitle","initTags","getTagsToDelete","tagNames","init","EditPost","Layout","loggedInComponents","contLogo","logo","containerLogo","containerNav","ErrorModal","Container","alignSelf","minWidth","App","getCat","getUsersData","loggedInRoutes","path","exact","process","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.41fa1712.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemContainer\":\"CategoryItem_itemContainer__BiNt3\",\"active\":\"CategoryItem_active__3bd-H\",\"container\":\"CategoryItem_container__3G0AW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__fXxBI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Backdrop_backdrop__1_XCN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentContainer\":\"ViewPost_contentContainer__1vClT\",\"tagLabel\":\"ViewPost_tagLabel__Enj0R\",\"content\":\"ViewPost_content__1gqI0\",\"title\":\"ViewPost_title__2u8Qz\",\"parentContainer\":\"ViewPost_parentContainer__1LzYV\",\"categoryContainer\":\"ViewPost_categoryContainer__2EbRV\",\"container\":\"ViewPost_container__3gdgx\",\"textLabel\":\"ViewPost_textLabel__2BVWE\",\"inputContainer\":\"ViewPost_inputContainer__W6lwb\",\"actions\":\"ViewPost_actions__2A-_1\",\"articleLabel\":\"ViewPost_articleLabel__AFoCW\",\"btnPost\":\"ViewPost_btnPost__1Uapm\",\"post\":\"ViewPost_post__GH9iE\"};","// Import the functions you need from the SDKs you need\r\nimport { initializeApp} from \"firebase/app\";\r\n\r\nimport {\r\n  getFirestore,\r\n  doc,\r\n  query,\r\n  collection,\r\n  getDocs,\r\n  setDoc,\r\n  addDoc,\r\n  updateDoc,\r\n  where,\r\n  deleteDoc \r\n} from \"firebase/firestore\";\r\nimport {\r\n  getStorage,\r\n  ref,\r\n  uploadBytesResumable,\r\n  getDownloadURL,\r\n} from \"firebase/storage\";\r\n\r\nimport {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  onAuthStateChanged,\r\n  signOut,\r\n} from \"firebase/auth\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA0t-XHWc3AonmYat7_pEIiTxm99rNqEyI\",\r\n  authDomain: \"user-posts-9df11.firebaseapp.com\",\r\n  databaseURL: \"https://user-posts-9df11-default-rtdb.firebaseio.com\",\r\n  projectId: \"user-posts-9df11\",\r\n  storageBucket: \"user-posts-9df11.appspot.com\",\r\n  messagingSenderId: \"70798554958\",\r\n  appId: \"1:70798554958:web:a9ac5ebfd7d2ec5629101f\",\r\n};\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n// admin.initializeApp({\r\n//   credential: admin.credential.cert(serviceAccount),\r\n//   databaseURL: \"https://user-posts-9df11-default-rtdb.firebaseio.com\"\r\n// });\r\nexport const db = getFirestore(app);\r\nexport async function getCategories() {\r\n  const q = query(collection(db, \"categories\"));\r\n  const querySnapshot = await getDocs(q);\r\n\r\n  if (querySnapshot.size == 0) {\r\n    return [];\r\n  } else {\r\n    const categories = [];\r\n    querySnapshot.forEach((doc) => {\r\n      categories.push({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      });\r\n    });\r\n    return categories;\r\n  }\r\n}\r\nexport async function deleteCategory(id) {\r\n    const docRef = await deleteDoc(doc(db, \"categories\",id));    \r\n    return docRef;\r\n}\r\nexport async function deletePost(uid,id) {\r\n  const docRef = await deleteDoc(doc(db, `users/${uid}/posts/${id}`));    \r\n  return docRef;\r\n}\r\nexport async function addCategory(data) {\r\n  \r\n  const docRef=collection(db, \"categories\")\r\n  const docSnapshot =await getDocs(docRef)\r\n  if(docSnapshot.size==0)\r\n  {\r\n    const docRef = await addDoc(collection(db, \"categories\"), { name: data });\r\n    return { id:docRef.id,name: data };\r\n  }else{\r\n    const q = query(docRef, where(\"name\", \"==\", data));\r\n    const querySnapshot = await getDocs(q);\r\n    \r\n    if (querySnapshot.size == 0) {\r\n      const docRef = await addDoc(collection(db, \"categories\"), { name: data });\r\n      \r\n      return { id:docRef.id,name: data };\r\n    } else {\r\n      let id;\r\n      querySnapshot.forEach((doc) => {\r\n        id = doc.id;\r\n      });\r\n      return { id,name: data };;\r\n    }\r\n  }\r\n    \r\n}\r\nexport async function addPost(uid, data) {\r\n  \r\n  const collectionRef=collection(db, `users/${uid}/posts`)\r\n  const docRef = await addDoc(collection(db, `users/${uid}/posts`), data);\r\n  return docRef.id;\r\n}\r\nexport async function editPost(uid,id, data) {  \r\n  const docRef=doc(db, `users/${uid}/posts/${id}`)\r\n  await setDoc(docRef, data);\r\n  return id;\r\n}\r\n\r\nexport async function addProfileData(id, data) {\r\n  \r\n  await setDoc(doc(db, \"users\", id), data);\r\n}\r\nexport async function updateProfileData(id, data) {\r\n  \r\n  await updateDoc(doc(db, \"users\", id), data);\r\n}\r\n// Get a list of cities from your database\r\nexport async function getUsers() {\r\n  const usersCol = collection(db, \"users\");\r\n  const usersSnapshot = await getDocs(usersCol);\r\n  const usersList = usersSnapshot.docs.map((doc) => {\r\n    return {\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    };\r\n  });\r\n  return usersList;\r\n}\r\nexport async function getUsersPosts(uid) {\r\n  const postsCol = collection(db, `users/${uid}/posts`);\r\n  const postsSnapshot = await getDocs(postsCol);\r\n  const postsList = postsSnapshot.docs.map((doc) => {\r\n    return {\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    };\r\n  });\r\n  return postsList;\r\n}\r\n\r\nconst auth = getAuth();\r\n\r\n// Start listing users from the beginning, 1000 at a time.\r\n\r\n\r\nonAuthStateChanged(auth, (user) => {\r\n  if (user) {\r\n    // User is signed in, see docs for a list of available properties\r\n    // https://firebase.google.com/docs/reference/js/firebase.User\r\n    const token = localStorage.getItem(\"user_token\");\r\n    if (!token) localStorage.setItem(\"user_token\", user.accessToken);\r\n    const uidls = localStorage.getItem(\"user_id\");\r\n    if (!uidls) localStorage.setItem(\"user_id\", user.uid);\r\n\r\n    // ...\r\n  } else {\r\n    // User is signed out\r\n    // ...\r\n    const token = localStorage.getItem(\"user_token\");\r\n    if (token) localStorage.removeItem(\"user_token\");\r\n    const uidls = localStorage.getItem(\"user_id\");\r\n    if (!uidls) localStorage.removeItem(\"user_id\");\r\n  }\r\n});\r\nexport const signUp = async (email, password) => {\r\n  try {\r\n    const auth = getAuth();\r\n    const userCredential = await createUserWithEmailAndPassword(\r\n      auth,\r\n      email,\r\n      password\r\n    );\r\n\r\n    return userCredential.user;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\nexport const uploadPicture = async (file, pathToFileDirectory) => {\r\n  \r\n  return new Promise(function (resolve, reject) {\r\n    if (file == null) return;\r\n    const storage = getStorage();\r\n    const fileExt =\r\n      file.name.split(\".\")[(file.name + \"\").split(\".\").length - 1];\r\n    const storageRef = ref(storage, `${pathToFileDirectory}/${file.name}`);\r\n    // const storageRef = ref(storage, \"images/\" + file.name);\r\n    const metadata = {\r\n      contentType: `image/${fileExt}`,\r\n    };\r\n\r\n    const uploadTask = uploadBytesResumable(storageRef, file, metadata);\r\n    // const uploadTask = uploadBytes(storageRef, file, metadata);\r\n    // Listen for state changes, errors, and completion of the upload.\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\r\n        const progress =\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        console.log(\"Upload is \" + progress + \"% done\");\r\n        switch (snapshot.state) {\r\n          case \"paused\":\r\n            console.log(\"Upload is paused\");\r\n            break;\r\n          case \"running\":\r\n            console.log(\"Upload is running\");\r\n            break;\r\n        }\r\n      },\r\n      (error) => {\r\n        // A full list of error codes is available at\r\n        // https://firebase.google.com/docs/storage/web/handle-errors\r\n        switch (error.code) {\r\n          case \"storage/unauthorized\":\r\n            // User doesn't have permission to access the object\r\n            reject(error);\r\n            break;\r\n          case \"storage/canceled\":\r\n            // User canceled the upload\r\n            reject(error);\r\n            break;\r\n\r\n          // ...\r\n\r\n          case \"storage/unknown\":\r\n            // Unknown error occurred, inspect error.serverResponse\r\n            reject(error);\r\n            break;\r\n        }\r\n      },\r\n      () => {\r\n        // Upload completed successfully, now we can get the download URL\r\n        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n          console.log(\"File available at\", downloadURL);\r\n          resolve(downloadURL);\r\n        });\r\n      }\r\n    );\r\n  });\r\n  // .on(\"state_changed\" , alert(\"success\") , alert);\r\n};\r\nexport const logIn = async (email, password) => {\r\n  try {\r\n    const auth = getAuth();\r\n    const userCredential = await signInWithEmailAndPassword(\r\n      auth,\r\n      email,\r\n      password\r\n    );\r\n\r\n    return userCredential.user;\r\n  } catch (error) {\r\n    \r\n    console.log(error.code, error.message);\r\n    return error;\r\n  }\r\n};\r\nexport const signOff = async (email, password) => {\r\n  try {\r\n    const auth = getAuth();\r\n    await signOut(auth);\r\n  } catch (error) {\r\n    console.log(error.code, error.message);\r\n  }\r\n};\r\n","import { createContext, useState, useEffect } from \"react\";\r\nimport { logIn, signOff, signUp } from \"../shared/firebase\";\r\n\r\nconst initialState = {\r\n  isLoggedIn: false,\r\n  token: \"\",\r\n  uid: \"\",\r\n  error: { code: \"\", message: \"\" },\r\n  confirm:{message:\"\"},\r\n  callSetError: (err) => {},\r\n  login: (email, password) => {},\r\n  signup: (email, password) => {},\r\n  signOff: () => {},\r\n  callSetConfirm: (confirm) => {},\r\n  clearConfirm: () => {},\r\n  clearError: () => {},\r\n};\r\nconst ctx = createContext(initialState);\r\nconst Provider = ctx.Provider;\r\nexport const AppProvider = (props) => {\r\n  useEffect(() => {\r\n    const tokenld = localStorage.getItem(\"user_token\");\r\n    if (tokenld) {\r\n      setIdToken(tokenld);\r\n    }\r\n    const uidls = localStorage.getItem(\"user_id\");\r\n    if (uidls) {\r\n      setIdUid(uidls);\r\n    }\r\n    if (tokenld) {\r\n      setLoggedIn(true);\r\n    }\r\n  }, []);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [idToken, setIdToken] = useState(\"\");\r\n  const [uid, setIdUid] = useState(\"\");\r\n  const [error, setError] = useState();\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  useEffect(() => {\r\n    localStorage.setItem(\"user_token\", idToken);\r\n    localStorage.setItem(\"user_id\", uid);\r\n  }, [idToken]);\r\n\r\n  const loginHandler = async (email, password) => {\r\n    const result = await logIn(email, password);\r\n    if (!result.code) {\r\n      setLoggedIn(true);\r\n      setIdToken(result.accessToken);\r\n      setIdUid(result.uid);\r\n      return result;\r\n    } else {\r\n      setError(result);\r\n      return;\r\n    }\r\n  };\r\n  const signUpHandler = async (email, password) => {\r\n    const result = await signUp(email, password);\r\n    \r\n    if (!result.code) {\r\n      setLoggedIn(true);\r\n      setIdToken(result.accessToken);\r\n      setIdUid(result.uid);\r\n      return result;\r\n    } else {\r\n      setError(result);\r\n      return;\r\n    }\r\n  };\r\n  const signOffHandler = async () => {\r\n    await signOff();\r\n    setLoggedIn(false);\r\n    setIdToken(\"\");\r\n  };\r\n  return (\r\n    <Provider\r\n      value={{\r\n        isLoggedIn: loggedIn,\r\n        login: loginHandler,\r\n        signUp: signUpHandler,\r\n        callSetError: (err) => setError(err),\r\n        token: idToken,\r\n        uid: uid,\r\n        error,\r\n        confirm:{message:confirm},\r\n        clearConfirm: () => {\r\n          setConfirm('');\r\n        },\r\n        callSetConfirm: (confirm) => \r\n          setConfirm(confirm),\r\n        signOff: signOffHandler,\r\n        clearError: () => {\r\n          setError(null);\r\n        },\r\n      }}\r\n    >\r\n      {props.children}\r\n    </Provider>\r\n  );\r\n};\r\nexport default ctx;\r\n","import { configureStore,createSlice } from '@reduxjs/toolkit'\r\n\r\nconst postsSlice=createSlice({\r\n    name: 'userAndPosts',\r\n    initialState:{categories:[],users:[],posts:[]},\r\n    reducers: {\r\n      loadCategories(state,action) {\r\n        state.categories=action.payload;\r\n      },\r\n      addCategories(state,action) {        \r\n        const tags=action.payload;\r\n        const stateCatIDs=state.categories.map(cat=>cat.id);\r\n\r\n        const tagsToAdd=tags.filter(tag=>!stateCatIDs.includes(tag.id))\r\n        state.categories=[...state.categories,...tagsToAdd];\r\n      },\r\n      deleteCategories(state,action) {        \r\n        const tags=action.payload;\r\n        const IDs=tags.map(cat=>cat.id)\r\n        state.categories=state.categories.filter(cat=>!IDs.includes(cat.id));\r\n      },\r\n      deletePosts(state,action) {         \r\n        const uid=action.payload.uid;\r\n        const id=action.payload.id;\r\n        state.posts=state.posts.filter(post=>!(post.uid===uid && post.id===id));\r\n      },\r\n      addPost(state,action) {                \r\n        state.posts =[...state.posts,action.payload] ;\r\n      },\r\n      editPost(state,action) {                \r\n        state.posts =state.posts.map(statePost=>{\r\n          if(statePost.id===action.payload.id)\r\n            return action.payload;\r\n          else\r\n           return statePost;\r\n        })\r\n      },\r\n      loadUsers(state,action) {\r\n        state.users=action.payload;\r\n      },\r\n      addUser(state,action) {\r\n        state.users=[...state.users,action.payload];\r\n      },\r\n      loadPosts(state, action) {\r\n        state.posts =[...state.posts,...action.payload] ;\r\n      }\r\n    }\r\n})\r\nexport const storeActions=postsSlice.actions;\r\nconst store = configureStore({    \r\n    reducer: {\r\n        userPosts:postsSlice.reducer\r\n    },devTools:true\r\n  })\r\nexport default store;\r\n","import React from 'react'\r\nimport classes from './Card.module.css'\r\nconst Card = (props) => {\r\n    const classCombine=`${classes.card} ${props.className?props.className:''}`;\r\n    return (\r\n        <div className={classCombine} style={{...props.style}}>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Card\r\n","import React from 'react'\r\nimport classes from './Input.module.css'\r\nconst Input = (props) => {\r\n    const classNames=`${classes.input} ${props.className}`;\r\n    let inputConst=<input style={{...props.style}} id ={props.id} className={classNames} value={props.value} name={props.name} onChange={props.onChange} type={props.type} required={props.required} />;\r\n    if(props.isRef)\r\n        inputConst=<input style={{...props.style}} id ={props.id} className={classNames}  name={props.name} ref={props.inputRef} type={props.type} placeholder={props.placeholder}\r\n        required={props.required} />;\r\n    return (\r\n        <div className={classes.inputContainer} style={{...props.inputContainerStyle||null}}>\r\n        <div style={{display:'flex',justifyContent:\"flex-start\"}}>\r\n        <label htmlFor={props.id} style={{...props.inputContainerLabelStyle}} placeholder={props.placeholder}>{props.title}</label>\r\n        </div>\r\n        {inputConst}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Input\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport classes from './Button.module.css'\r\n\r\nconst Button = (props) => {\r\n    const classBtn=`${props.className?props.className:''} ${classes.btn}`\r\n    debugger\r\n    let btn=<button className={`${props.className?props.className:''} ${classes.btn}`} onClick={props.onClick} style={{...props.style}} {...props}>{props.title}</button>;\r\n    if(props.isLink)\r\n        btn=<Link to={props.to}  className={`${props.className?props.className:''} ${classes.btn}`} style={{...props.style}} {...props}>\r\n            {props.title}\r\n        </Link>\r\n    return (\r\n        btn\r\n    )\r\n}\r\n\r\nexport default Button\r\n","import React, { useState,useRef,useEffect } from \"react\";\r\nimport Button from \"./Button\";\r\nimport classes from \"./ImageUpload.module.css\";\r\n\r\nconst ImageUpload = (props) => {\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n  \r\n  const reader = new FileReader();\r\n  \r\n    reader.addEventListener(\"load\", function () {\r\n        // convert image file to base64 string\r\n        setImageUrl(reader.result);\r\n      }, false);\r\n    \r\n  \r\n  const fileInputRef= useRef();\r\n  \r\n\r\n  const fileOnChangeHandler=(e) =>{\r\n    if(e.target.files[0]){\r\n        props.onFileReceived(e.target.files[0]);\r\n        if (e.target.files[0]) {\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <div className={classes[\"image-container\"]}>\r\n        {imageUrl &&<img src={imageUrl} alt={props.imageTitle} title={props.imageTitle} className={classes.image} />}\r\n      </div>\r\n      <input type=\"file\" accept=\".png,.jpeg,.jpg,.bmp\" style={{display:\"none\"}} ref ={fileInputRef} onChange={fileOnChangeHandler}/>\r\n      <div className={classes[\"button-container\"]}>\r\n          <label >{props.imageTitle}</label>\r\n          <Button title=\"Upload\" onClick={()=>fileInputRef.current.click()} type=\"button\"/>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Card from \"./UI/Card\";\r\nimport classes from \"./SignupComponent.module.css\";\r\nimport Input from \"./UI/Input\";\r\nimport Button from \"./UI/Button\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AppContext from \"../context/app-context\";\r\nimport ImageUpload from \"./UI/ImageUpload\";\r\nimport {storeActions} from '../store/store'\r\nimport {\r\n  uploadPicture,\r\n  addProfileData,\r\n  updateProfileData,\r\n} from \"../shared/firebase\";\r\n\r\nconst SignUpComponent = () => {\r\n  const dispatch=useDispatch();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [file, setFile] = useState();\r\n  \r\n  const history = useHistory();\r\n  const [password, setPassword] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  // const [imageUrl, setImageUrl] = useState(\"\");\r\n  const ctx = useContext(AppContext);\r\n  const onFileReceivedHandler = (file) => {\r\n    setFile(file);\r\n  };\r\n  const submitHandler = async (event) => {\r\n    debugger;\r\n    event.preventDefault();\r\n    let user;\r\n    try {\r\n      user = await ctx.signUp(email, password);\r\n    } catch (error) {\r\n      alert(\"signup\")\r\n      ctx.callSetError(error);\r\n      return;\r\n    }\r\n    try {\r\n      await addProfileData(user.uid, { name });\r\n      if(!file)\r\n        dispatch(storeActions.addUser({id:user.uid,  name,profileImageUrl:null }))\r\n        if (user) history.replace(\"/\");\r\n    } catch (error) {\r\n      alert(\"addpropfile\")\r\n      ctx.callSetError(error);\r\n      if (user) history.replace(\"/\");\r\n      return;\r\n    }\r\n    let profileImageUrl;\r\n    try {\r\n      profileImageUrl = await uploadPicture(file, `${user.uid}/images`);\r\n      dispatch(storeActions.addUser({id:user.uid,  name,profileImageUrl }))\r\n      // setImageUrl(profileImageUrl);\r\n      if (user) history.replace(\"/\");\r\n    } catch (error) {\r\n      alert(\"profile\")\r\n      ctx.callSetError(error);\r\n      if (user) history.replace(\"/\");\r\n      return;\r\n    }\r\n    if (profileImageUrl) {\r\n      try {\r\n        await updateProfileData(user.uid, { profileImageUrl });\r\n        if (user) history.replace(\"/\");\r\n      } catch (error) {\r\n        alert()\r\n        ctx.callSetError(error);\r\n        if (user) history.replace(\"/\");\r\n      }\r\n    }\r\n  };\r\n  const emailChangeHandler = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n  const nameChangeHandler = (event) => {\r\n    setName(event.target.value);\r\n  };\r\n\r\n  const passwordChangeHandler = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n  return (\r\n    <div className={classes.content}>\r\n      <Card className={classes.title}>\r\n        <h1> Sign Up</h1>\r\n      </Card>\r\n      <div className={classes.parentContainer}>\r\n        <Card className={classes.container} style={{ paddingBottom: \"20px\" }}>\r\n          <form onSubmit={submitHandler}>\r\n            <div className={classes.inputContainer}>\r\n              <Input\r\n                id=\"name\"\r\n                type=\"name\"\r\n                placeholder=\"Name\"\r\n                onChange={nameChangeHandler}\r\n                value={name}\r\n                title=\"Name\"\r\n                inputContainerLabelStyle={{paddingTop:\"10px\"}}\r\n                required\r\n              />\r\n            </div>\r\n            <div className={classes.inputContainer}>\r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"E Mail\"\r\n                onChange={emailChangeHandler}\r\n                value={email}\r\n                title=\"E Mail\"\r\n                inputContainerLabelStyle={{paddingTop:\"10px\"}}\r\n                required\r\n              />\r\n            </div>\r\n            <div className={classes.inputContainer}>\r\n              <Input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                onChange={passwordChangeHandler}\r\n                value={password}\r\n                title=\"Password\"\r\n                required\r\n              />\r\n            </div>\r\n            <div className={classes.imageContainer}>\r\n              <ImageUpload\r\n                imageTitle=\"Profile image\"\r\n                onFileReceived={onFileReceivedHandler}\r\n              />\r\n            </div>\r\n            <div className={classes.actions}>\r\n              <Button\r\n                title=\"Sign up\"\r\n                onClick={() => {}}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n              <Button\r\n                title=\"Cancel\"\r\n                onClick={() => {\r\n                  ctx.clearError();\r\n                  history.replace(\"/\");\r\n                }}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n            </div>\r\n          </form>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUpComponent;\r\n","import React from 'react'\r\nimport SignupComponent from '../components/SignupComponent'\r\n\r\n\r\nconst SignUp = () => {\r\n    return (\r\n        \r\n        <SignupComponent/>\r\n        \r\n    )\r\n}\r\n\r\nexport default SignUp\r\n","import React, { useState, useContext } from \"react\";\r\nimport Card from \"./UI/Card\";\r\nimport classes from \"./SignupComponent.module.css\";\r\nimport Input from \"./UI/Input\";\r\nimport Button from \"./UI/Button\";\r\nimport AppContext from \"../context/app-context\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst LoginComponent = () => {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState(\"\");\r\n  const ctx = useContext(AppContext);\r\n  const [password, setPassword] = useState(\"\");\r\n  const submitHandler = async (event) => {\r\n    event.preventDefault();\r\n\r\n    // const user= await logIn(email,password);\r\n    // console.log(user);\r\n    const user = await ctx.login(email, password);\r\n    debugger;\r\n    if (user) history.replace(\"/\");\r\n  };\r\n  const emailChangeHandler = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const passwordChangeHandler = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n  const cancelHandler = () => {\r\n    ctx.clearError();\r\n    history.replace(\"/\");\r\n\r\n  };\r\n  return (\r\n    <div className={classes.content}>\r\n      <Card className={classes.title}>\r\n        <h1> Login</h1>\r\n      </Card>\r\n      <div className={classes.parentContainer}>\r\n        <Card\r\n          className={classes.container}\r\n          style={{paddingBottom: \"20px\" }}\r\n        >\r\n          <form onSubmit={submitHandler}>\r\n              \r\n              <Input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"E Mail\"\r\n                onChange={emailChangeHandler}\r\n                value={email}\r\n                title=\"E Mail\"\r\n                inputContainerLabelStyle={{paddingTop:\"10px\"}}\r\n                required\r\n              />\r\n              <Input\r\n                id=\"email\"\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                title=\"Password\"\r\n                type=\"password\"\r\n                onChange={passwordChangeHandler}\r\n                value={password}\r\n                inputContainerLabelStyle={{paddingTop:\"10px\"}}\r\n                required\r\n              />\r\n            <div className={classes.actions}>\r\n              <Button\r\n                title=\"Login\"\r\n                onClick={()=>{}}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n              <Button\r\n                title=\"Cancel\"\r\n                type=\"button\"\r\n                onClick={cancelHandler}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n            </div>\r\n          </form>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginComponent;\r\n","import React from 'react'\r\nimport LoginComponent from './../components/LoginComponent';\r\n\r\n\r\nconst Login = () => {\r\n    return (\r\n        \r\n        <LoginComponent/>\r\n        \r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React from \"react\";\r\nimport classes from \"./Modal.module.css\";\r\n\r\nconst Modal = (props) => {\r\n  return (\r\n    <div className={classes.container} onClick={props.onClose}>\r\n      <div className={classes[\"modal-container\"]} onClick={e=>e.stopPropagation()}>\r\n        <div className={classes[\"modal-header\"]} style={{ ...props.headerStyle}}>\r\n          {props.header}\r\n          {/* <h1>Modal Heading</h1> */}\r\n        </div>\r\n        <div style={{ ...props.bodyStyle,display:\"flex\",justifyContent:\"center\",alignItems:\"center\"}} className={classes[\"modal-body\"]} >\r\n          {props.children}\r\n          {/* <p>          \r\n          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ut odit\r\n          aperiam consequatur nisi praesentium illum, tenetur, beatae\r\n          perferendis eaque nam voluptatem modi earum, quidem est? Debitis quos\r\n          quibusdam suscipit ipsam!\r\n        </p> */}\r\n        </div>\r\n        <div className={classes[\"modal-footer\"]}>\r\n          {props.actions}\r\n\r\n          {/* <Button title=\"OK\"/>\r\n      <Button title=\"cancel\"/> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react'\r\nimport classes from './Backdrop.module.css'\r\nconst Backdrop = (props) => {\r\n    return (\r\n        <div onClick={props.onClose} className={classes.backdrop}>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Backdrop\r\n","import React, { useContext } from \"react\";\r\nimport Button from \"../UI/Button\";\r\nimport Modal from \"./Modal\";\r\nimport AppContext from \"../../context/app-context\";\r\nimport Backdrop from \"./Backdrop\";\r\nconst ConfirmModal = (props) => {\r\n    const ctx = useContext(AppContext);\r\n    const { confirm, clearConfirm} = ctx;\r\n    return(\r\n        confirm && confirm.message ? (\r\n        <>\r\n          <Backdrop onClose={clearConfirm} />\r\n          <Modal\r\n            header={\r\n              <h1\r\n                style={{\r\n                  color: \"white\",\r\n                  fontWeight: \"bold\",\r\n                  padding: \"5px\",\r\n                  width: \"100%\"                \r\n                }}\r\n              >\r\n                Are you Sure?\r\n              </h1>\r\n            }\r\n            actions={<div><Button title={props.confirmTitle} onClick={props.onConfirm} style={{fontWeight:\"bold\",color:\"red\"}}/><Button title=\"Close\" onClick={clearConfirm} style={{fontWeight:\"bold\"}}/></div>}\r\n            bodyStyle={{ color: \"red\"}}\r\n            onClose={clearConfirm}\r\n          >\r\n            <p style={{backgroundColor:\"white\",padding:\"10px\",borderRadius:\"5px\",border:\"2px solid black\"}}>\r\n            {confirm.message}\r\n            </p>\r\n          </Modal>\r\n        </>\r\n      ):null\r\n    )  \r\n}\r\n\r\nexport default ConfirmModal\r\n","export const encodeStr = (rawStr) =>\r\n  rawStr.replace(/[\\u00A0-\\u9999<>\\&]/g, function (i) {\r\n    return \"&#\" + i.charCodeAt(0) + \";\";\r\n  });\r\n\r\nexport const decodeStr = (rawStr) => {\r\n  var e = document.createElement(\"textarea\");\r\n  e.innerHTML = rawStr;\r\n  // handle case of empty input\r\n  return e.childNodes.length === 0 ? \"\" : e.childNodes[0].nodeValue;\r\n};\r\n\r\nexport const getUserCategories = (catIDs, categories) => {\r\n  const IDs = catIDs.map((cat) => cat.id);\r\n  return categories.filter((cat) => IDs.includes(cat.id));\r\n};\r\nexport const getUniqueTags = (id, posts) => {\r\n  debugger;\r\n  const tagsToDelete = [];\r\n  const otherPosts = posts.filter((post) => post.id !== id);\r\n\r\n  const post = posts.find((post) => post.id === id);\r\n  if (otherPosts.length === 0) return post.tags;\r\n  if (post && post.tags && post.tags.length > 0) {\r\n    post.tags.forEach((tag) => {\r\n      let isUnique = true;\r\n      otherPosts.forEach((otherPost) => {\r\n        const IDs = otherPost.tags.map((cat) => cat.id);\r\n        isUnique = isUnique && !IDs.includes(tag.id);\r\n        if (!isUnique) return;\r\n      });\r\n      if (isUnique) tagsToDelete.push(tag);\r\n    });\r\n  }\r\n\r\n  return tagsToDelete;\r\n};\r\n","import React, { forwardRef } from \"react\";\r\nimport classes from \"./TextArea.module.css\";\r\nconst textarea = forwardRef((props, ref) => {\r\n  const classNames = `${classes.input} ${props.className}`;\r\n  let inputConst = (\r\n    <textarea\r\n      style={{ ...props.style }}\r\n      id={props.id}\r\n      className={classNames}\r\n      {...props}\r\n    >\r\n      {props.value}\r\n    </textarea>\r\n  );\r\n  if (ref)\r\n    inputConst = (\r\n      <textarea\r\n        style={{ ...props.style }}\r\n        id={props.id}\r\n        className={classNames}\r\n        ref={ref}\r\n        {...props}\r\n      ></textarea>\r\n    );\r\n  return (\r\n    <div\r\n      className={classes.inputContainer}\r\n      style={{ ...(props.inputContainerStyle || null) }}\r\n    >\r\n      <div style={{ display: \"flex\", justifyContent: \"flex-start\" }}>\r\n        <label htmlFor={props.id} style={{ ...props.inputContainerLabelStyle }}>\r\n          {props.title}\r\n        </label>\r\n      </div>\r\n      {inputConst}\r\n    </div>\r\n  );\r\n});\r\nexport default textarea;\r\n","import React, { useContext, useRef, useEffect } from \"react\";\r\nimport AppContext from \"../context/app-context\";\r\nimport classes from \"./ViewPost.module.css\";\r\nimport Card from \"./UI/Card\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useSelector,useDispatch } from \"react-redux\";\r\nimport Button from \"./UI/Button\";\r\nimport ConfirmModal from \"./shared/ConfirmModal\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { decodeStr } from \"./../shared/utilities\";\r\nimport { deleteCategory, deletePost } from \"../shared/firebase\";\r\nimport { storeActions } from \"./../store/store\";\r\nimport { getUniqueTags } from \"../shared/utilities\";\r\nimport TextArea from './UI/TextArea'\r\nconst ViewPost = (props) => {\r\n  const articleRef = useRef();\r\n  const commentRef = useRef();\r\n  const location = useLocation();\r\n  const params = new URLSearchParams(location.search);\r\n  const deleteAllowed = params.get(\"deleteAllowed\");\r\n  let isTrueSet;\r\n  if (deleteAllowed) isTrueSet = deleteAllowed === \"true\";\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const ctx = useContext(AppContext);\r\n  const postId = useParams().postId;\r\n  const categories = useSelector((state) => state.userPosts.categories);\r\n  const posts = useSelector((state) => state.userPosts.posts);\r\n  const userPost = posts.find((post) => post.id === postId);\r\n  useEffect(() => {\r\n    if(userPost)\r\n      articleRef.current.innerHTML = decodeStr(userPost.article);\r\n  }, [userPost]);\r\n  const onConfirmHandler = async () => {\r\n    ctx.clearConfirm()\r\n    const tagsToDelete = getUniqueTags(userPost.id, posts);\r\n    tagsToDelete.forEach(async(tag) => {\r\n      const delRef = await deleteCategory(tag.id);\r\n      console.log(delRef);\r\n    });\r\n    dispatch(storeActions.deleteCategories(tagsToDelete));\r\n    const delRef = await deletePost(userPost.uid, userPost.id);\r\n    console.log(delRef);\r\n    dispatch(storeActions.deletePosts({uid:userPost.uid,id:userPost.id}));\r\n    ctx.clearConfirm();\r\n    history.replace('/')\r\n  };\r\n  if(!userPost) return null;\r\n  if (!categories) return null;\r\n  if (!posts) return null;\r\n  const IDs=userPost.tags.map(cat=>cat.id);\r\n  const userCategories = categories.filter((cat) =>\r\n  IDs.includes(cat.id)\r\n  );\r\n  const cancelHandler = () => {\r\n    history.goBack();\r\n  };\r\n  const submitHandler=(e)=>{\r\n    e.preventDefault()\r\n    debugger\r\n    console.log(commentRef.current.value)\r\n  }\r\n  const deleteHandler=()=>{\r\n    ctx.callSetConfirm(\r\n      `Do you want to delete the post with title \"${userPost.title}\"`\r\n    );\r\n  }\r\n  if (!userPost) {\r\n    return (\r\n      <Card style={{ height: \"50%\", width: \"50%\", margin: \"auto\" }}>\r\n        <div\r\n          style={{\r\n            margin: \"auto\",\r\n            height: \"100%\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            textAlign: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          <h2 style={{ width: \"50%\" }}>Post not found</h2>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n  return (\r\n    <div className={classes.contentContainer}>\r\n      {isTrueSet && (\r\n        <ConfirmModal\r\n          confirmTitle=\"Delete\"\r\n          onConfirm={onConfirmHandler}\r\n        />\r\n      )}\r\n\r\n      <div className={classes.content}>\r\n        <Card className={classes.title}>\r\n          <h1>View Post</h1>\r\n        </Card>\r\n        <div className={classes.parentContainer}>\r\n          <Card className={classes.container} style={{ paddingBottom: \"20px\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                width: \"100%\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  flexGrow: 1,\r\n\r\n                  justifyContent: \"space-between\",\r\n                  width: \"100%\",\r\n                }}\r\n              >\r\n                <div className={classes.inputContainer}>\r\n                  <div\r\n                    style={{ display: \"flex\", justifyContent: \"flex-start\" }}\r\n                  >\r\n                    <label>Title</label>\r\n                  </div>\r\n                  <label className={classes.textLabel}>{userPost.title}</label>\r\n                </div>\r\n                <div className={classes.categoryContainer}>\r\n                  <div className={classes.labelContainer}>\r\n                    <div style={{ display: \"flex\" }}>\r\n                      <label>Categories</label>\r\n                    </div>\r\n                  </div>\r\n                  <div className={classes.tagsContainer}>\r\n                    {userCategories.map((cat) => {\r\n                      return (\r\n                        <label className={classes.tagLabel} key={cat.id}>\r\n                          {cat.name}\r\n                        </label>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className={classes.inputContainer}>\r\n                <div style={{ display: \"flex\", justifyContent: \"flex-start\" }}>\r\n                  <label>Article</label>\r\n                </div>\r\n                <div style={{ overflowY: \"auto\", maxHeight: \"70vh\" }}>\r\n                  <div className={classes.articleLabel} ref={articleRef}>\r\n                    {userPost.title}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <form onSubmit={submitHandler} style={{display:\"flex\",alignItems:\"flex-end\",justifyContent:\"flex-end\"}}>\r\n              <div className={classes.inputContainer}>\r\n            \r\n              <TextArea\r\n                id=\"comments\"\r\n                placeholder=\"Enter comments for the post\"\r\n                title=\"Comments\"\r\n                required\r\n                rows={6}\r\n                ref={commentRef}\r\n                className={classes.post}\r\n                cols={80}\r\n              />\r\n            </div>\r\n            \r\n            <Button className={classes.btnPost}\r\n                    title=\"Post\"\r\n                    style={{ marginRight: \"10px\" }}\r\n                  />\r\n            \r\n            </form>\r\n              <div className={classes.actions}>\r\n                {isTrueSet && (\r\n                  <Button\r\n                    title=\"Edit\"\r\n                    onClick={() => {\r\n                      history.push(`/posts/edit/${postId}`);\r\n                    }}\r\n                    style={{ marginRight: \"10px\" }}\r\n                  />\r\n                )}\r\n                {isTrueSet && (\r\n                  <Button\r\n                    title=\"Delete\"\r\n                    onClick={deleteHandler}\r\n                    style={{ marginRight: \"10px\",color:\"red\" }}\r\n                  />\r\n                )}\r\n                <Button\r\n                  title=\"Cancel\"\r\n                  type=\"button\"\r\n                  onClick={cancelHandler}\r\n                  style={{ marginRight: \"10px\" }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewPost;\r\n","import React from 'react'\r\nimport ViewPost from '../components/ViewPost'\r\nconst ViewPosts = (props) => {\r\n    return (\r\n        <ViewPost/>\r\n    )\r\n}\r\n\r\nexport default ViewPosts\r\n","import React from 'react'\r\nimport classes from './CategoryItem.module.css'\r\nimport { useHistory,useLocation } from 'react-router-dom';\r\nconst CategoryItem = (props) => {\r\n    console.log(\"item rerendered\")\r\n    const location=useLocation();\r\n    const params = new URLSearchParams(location.search);\r\n    const catId = params.get(\"catId\");\r\n  console.log(\"catId\",catId)\r\n    const history =useHistory();\r\n      \r\n    const onClickHandler=(id)=>{\r\n        history.push(`/posts?catId=${id}`);\r\n    }\r\n    console.log(props.isActive)\r\n    return (\r\n        <div className={`${classes.itemContainer} ${props.isActive?classes.active:''}`} onClick={onClickHandler.bind(this,props.id)}>\r\n            <h4>{props.name}</h4>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CategoryItem\r\n","import React,{useState,useEffect} from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport classes from \"./CategoriesList.module.css\";\r\nimport CategoryItem from \"./CategoryItem\";\r\nimport { useHistory,useLocation } from \"react-router-dom\";\r\nconst CategoriesList = () => {\r\n  // const [catID,setCatID]= useState()\r\n  const history = useHistory();\r\n  const location=useLocation();\r\n  const params = new URLSearchParams(location.search);\r\n  const catId = params.get(\"catId\");\r\n  // useEffect(() => {\r\n  //   setCatID(catId);\r\n    \r\n  // }, [catId])\r\n  console.log(catId);\r\n  const categories = useSelector((state) => {\r\n    return state.userPosts.categories;\r\n  });\r\n  \r\n\r\n  const onClickHandler = () => {\r\n    history.replace(\"/posts\");\r\n  };\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.catgories} >\r\n        <h3>Categories</h3>\r\n      </div>\r\n      <div className={`${classes.ItemContainer} ${!catId?classes.active:''}`} onClick={onClickHandler}>\r\n        <h4>All</h4>\r\n      </div>\r\n      {categories.map((category) => (\r\n        <CategoryItem key={category.id} isActive={catId==category.id} id={category.id} name={category.name} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoriesList;\r\n","import React, { useRef, useEffect, useContext } from \"react\";\r\nimport AppContext from \"../context/app-context\";\r\nimport { getUserCategories, decodeStr } from \"./../shared/utilities\";\r\nimport { useSelector } from \"react-redux\";\r\nimport classes from \"./Post.module.css\";\r\nimport \"@fortawesome/fontawesome-free/css/all.css\";\r\nimport ConfirmModal from \"./shared/ConfirmModal\";\r\nimport { useHistory } from \"react-router\";\r\nconst Post = (props) => {\r\n  const history = useHistory();\r\n  const onClickHandler = () => {\r\n    history.push(`posts/view/${props.id}?deleteAllowed=${props.deleteAllowed}`);\r\n    // ?deleteAllowed=${props.deleteAllowed\r\n  };\r\n  const articleRef = useRef();\r\n  const ctx = useContext(AppContext);\r\n  const onDeleteHandler = (e) => {\r\n    e.stopPropagation()\r\n    ctx.callSetConfirm(\r\n      `Do you want to delete the post with title \"${props.title}\"`\r\n    );\r\n  };\r\n  const onEditHandler = (e) => {\r\n    e.stopPropagation()\r\n    history.push(`/posts/edit/${props.id}`)\r\n  };\r\n  useEffect(() => {\r\n    articleRef.current.innerHTML = decodeStr(props.article);\r\n  }, []);\r\n  const categories = useSelector((state) => {\r\n    return state.userPosts.categories;\r\n  });\r\n  \r\n  const userCategories = getUserCategories(props.tags, categories);\r\n  const users = useSelector((state) => {\r\n    return state.userPosts.users;\r\n  });\r\n  debugger\r\n  const user = users.find((user) => user.id == props.uid);\r\n\r\n  return (\r\n    <>\r\n      {props.deleteAllowed && (\r\n        <ConfirmModal\r\n          confirmTitle=\"Delete\"\r\n          onConfirm={props.onConfirm.bind(this, props.uid, props.id)}\r\n        />\r\n      )}\r\n\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          position: \"relative\",\r\n          flexGrow: 0,\r\n          marginTop: \"30px\",\r\n          cursor: \"pointer\",\r\n          backgroundColor:\"white\"\r\n        }}\r\n        onClick={onClickHandler}\r\n      >\r\n        <h2>\r\n          {props.title}\r\n          {props.deleteAllowed && (\r\n            <span\r\n              className={classes.editAction}\r\n              onClick={onEditHandler}\r\n              title=\"Edit\"\r\n              style={{\r\n                position: \"absolute\",\r\n                cursor: \"pointer\",\r\n                right: \"20px\",\r\n                color: \"rgb(190, 211, 212)\",\r\n              }}\r\n            >\r\n              <i class={`far fa-edit ${classes.edit}`}></i>\r\n            </span>\r\n          )}\r\n          {props.deleteAllowed && (\r\n            <span\r\n              className={classes.deleteAction}\r\n              onClick={onDeleteHandler}\r\n              title=\"Delete\"\r\n              style={{\r\n                position: \"absolute\",\r\n                cursor: \"pointer\",\r\n                right: 0,\r\n                color: \"rgb(190, 211, 212)\",\r\n              }}\r\n            >\r\n              <i className={`far fa-trash-alt ${classes.delete}`}></i>\r\n            </span>\r\n          )}\r\n        </h2>\r\n        <div className={classes.container}>\r\n          <hr />\r\n          <ul>\r\n            {userCategories.map((tag) => (\r\n              <li key={tag.id}>{tag.name}</li>\r\n            ))}\r\n          </ul>\r\n          <div ref={articleRef} className={classes.article}></div>\r\n          <div className={classes.author}>\r\n            <span className={classes.user}>{user.name}</span>\r\n            <span>--</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React, { useContext } from \"react\";\r\nimport Post from \"./Post\";\r\nimport {useDispatch } from \"react-redux\";\r\nimport AppContext from \"../context/app-context\";\r\nimport { getUniqueTags } from \"../shared/utilities\";\r\nimport { storeActions } from \"./../store/store\";\r\nimport { deleteCategory, deletePost } from \"../shared/firebase\";\r\nconst AllPostsComponent = (props) => {\r\n  const dispatch = useDispatch();\r\n  const ctx = useContext(AppContext);\r\n  const onConfirmHandler = async (uid, id) => {\r\n    \r\n    const tagsToDelete = getUniqueTags(id, props.posts);\r\n    \r\n    tagsToDelete.forEach(async(tagId) => {\r\n      const delRef = await deleteCategory(tagId.id);\r\n      console.log(delRef);\r\n    });\r\n    dispatch(storeActions.deleteCategories(tagsToDelete));\r\n    const delRef = await deletePost(uid, id);\r\n    console.log(delRef);\r\n    dispatch(storeActions.deletePosts({ uid, id }));\r\n    ctx.clearConfirm();\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        paddingTop: \"20px\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-evenly\",\r\n        alignItems: \"flex-start\",\r\n        gap: \"20px, 30px\",\r\n        flexWrap: \"wrap\",\r\n      }}\r\n    >\r\n      {props.posts.map((post) => {\r\n        return (\r\n          <Post\r\n            key={post.id}\r\n            article={post.article}\r\n            deleteAllowed={ctx.uid===post.uid}\r\n            uid={post.uid}\r\n            id={post.id}\r\n            title={post.title}\r\n            tags={post.tags}\r\n            onConfirm={onConfirmHandler}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllPostsComponent;\r\n","import React from \"react\";\r\nimport {useLocation} from 'react-router-dom'\r\nimport CategoriesList from \"./CategoriesList\";\r\nimport { useSelector } from \"react-redux\";\r\nimport AllPostsComponent from './AllPostsComponent';\r\n\r\nconst Posts = (props) => {\r\n  const location= useLocation()\r\n  \r\n  const params = new URLSearchParams(location.search);\r\n  const catId = params.get(\"catId\");\r\n  const allPosts = useSelector((state) => {\r\n    return state.userPosts.posts;\r\n  });\r\n  let posts=allPosts;\r\n  if(catId){    \r\n    posts=allPosts.filter(post=>{\r\n      const IDs=post.tags.map(cat=>cat.id)\r\n      return IDs.includes(catId)\r\n    });\r\n  }\r\n  console.log(\"posts\",posts)\r\n  return (\r\n    <div style={{ flex: 1, display: \"flex\" }}>\r\n      <CategoriesList />\r\n      <AllPostsComponent posts={posts}/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Posts;\r\n","import React from 'react'\r\nimport Posts from './../components/Posts';\r\n\r\n\r\nconst AllPosts = () => {\r\n    \r\n    return (\r\n        <Posts/>\r\n    )\r\n}\r\n\r\nexport default AllPosts\r\n","import React, { useState } from \"react\";\r\nimport ReactTags from \"react-tag-autocomplete\";\r\nimport \"./AutoComplete.css\";\r\nimport classes from \"./AutoComplete.module.css\";\r\n\r\nconst AutoComplete = (props) => {\r\n  const reactTags = React.createRef();\r\n  const [tagsState, setTagsState] = useState({\r\n    tags: props.tags || [\r\n      { id: 1, name: \"Apples\" },\r\n      { id: 2, name: \"Pears\" },\r\n    ],\r\n    suggestions: props.suggestions || [\r\n      { id: 3, name: \"Bananas\" },\r\n      { id: 4, name: \"Mangos\" },\r\n      { id: 5, name: \"Lemons\" },\r\n      { id: 6, name: \"Apricots\" },\r\n    ],\r\n  });\r\n  const onDelete = (i) => {\r\n    const tags = tagsState.tags.slice(0);\r\n    tags.splice(i, 1);\r\n    setTagsState((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        tags: [...tags],\r\n      };\r\n    });\r\n    props.onTagsChanged(tags);\r\n  };\r\n  const onAddition = (tag) => {\r\n    \r\n    const tags = [].concat(tagsState.tags, tag);\r\n    setTagsState((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        tags: [...tags],\r\n      };\r\n    });\r\n    props.onTagsChanged(tags);\r\n  };\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.labelContainer}>\r\n        <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n          <label>{props.title}</label>\r\n        </div>\r\n      </div>\r\n      <ReactTags\r\n        placeholderText={props.placeholderText || \"Enter a value\"}\r\n        ref={reactTags}\r\n        minQueryLength={1}\r\n        tags={tagsState.tags}\r\n        suggestions={tagsState.suggestions}\r\n        onDelete={onDelete}\r\n        allowNew\r\n        onAddition={onAddition}\r\n        className={classes.reactTags}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AutoComplete;\r\n\r\n// export default class AutoComplete extends React.Component {\r\n//     constructor (props) {\r\n//       super(props)\r\n\r\n//       this.state = {\r\n//         tags: [\r\n//           { id: 1, name: \"Apples\" },\r\n//           { id: 2, name: \"Pears\" }\r\n//         ],\r\n//         suggestions: [\r\n//           { id: 3, name: \"Bananas\" },\r\n//           { id: 4, name: \"Mangos\" },\r\n//           { id: 5, name: \"Lemons\" },\r\n//           { id: 6, name: \"Apricots\" }\r\n//         ]\r\n//       }\r\n\r\n//       this.reactTags = React.createRef()\r\n//     }\r\n\r\n//     onDelete (i) {\r\n//       const tags = this.state.tags.slice(0)\r\n//       tags.splice(i, 1)\r\n//       this.setState({ tags })\r\n//     }\r\n\r\n//     onAddition (tag) {\r\n//       const tags = [].concat(this.state.tags, tag)\r\n//       this.setState({ tags })\r\n//     }\r\n\r\n//     render () {\r\n//       return (\r\n//         <ReactTags\r\n//           ref={this.reactTags}\r\n//           tags={this.state.tags}\r\n//           suggestions={this.state.suggestions}\r\n//           onDelete={this.onDelete.bind(this)}\r\n//           onAddition={this.onAddition.bind(this)} />\r\n//       )\r\n//     }\r\n//   }\r\n// const AutoComplete = (props) => {\r\n//   const [tags, setTags] = useState(props.tags || []);\r\n//   const [suggestions] = useState(props.suggestions);\r\n//   const autoCompleteRef = useRef();\r\n//   const handleDelete = (i) => {\r\n//     const tagsArr = tags.slice(0);\r\n//     tagsArr.splice(i, 1);\r\n//     setTags(tagsArr);\r\n//     props.tagChanged(tags);\r\n//   };\r\n//   const handleAddition = (tag) => {\r\n//     const tagsArr = [].concat(tags, tag);\r\n//     setTags(tagsArr);\r\n//     props.tagChanged(tagsArr);\r\n//   };\r\n//   return (\r\n//     <div>\r\n//       <ReactTags\r\n//         tags={tags}\r\n//         ref={autoCompleteRef}\r\n//         suggestions={suggestions}\r\n//         handleDelete={handleDelete}\r\n//         handleAddition={handleAddition}\r\n//         allowNew\r\n//         placeholder={props.placeholder || \"Enter a letter to get suggestion\"}\r\n//         minQueryLength={1}\r\n//       />\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default AutoComplete;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { EditorState, convertToRaw, ContentState } from \"draft-js\";\r\nimport { Editor } from \"react-draft-wysiwyg\";\r\nimport draftToHtml from \"draftjs-to-html\";\r\nimport htmlToDraft from \"html-to-draftjs\";\r\n\r\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\r\nimport classes from \"./RichText.module.css\";\r\nconst RichText = (props) => {\r\n  let initialContent = \"\";\r\n  const divRef = useRef();\r\n  const [editorState, setEditorState] = useState(() =>\r\n    EditorState.createEmpty()\r\n  );\r\n  const { initHtml } = props;\r\n  useEffect(() => {\r\n    const contentBlock = htmlToDraft(initHtml || \"\");\r\n    if (contentBlock) {\r\n      const contentState = ContentState.createFromBlockArray(\r\n        contentBlock.contentBlocks\r\n      );\r\n      initialContent = EditorState.createWithContent(contentState);\r\n      setEditorState(initialContent);      \r\n    }\r\n  }, [initHtml]);\r\n  const uploadImageCallBack = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const xhr = new XMLHttpRequest();\r\n      xhr.open(\"POST\", \"https://api.imgur.com/3/image\");\r\n      xhr.setRequestHeader(\"Authorization\", \"Client-ID ##clientid##\");\r\n      const data = new FormData();\r\n      data.append(\"image\", file);\r\n      xhr.send(data);\r\n      xhr.addEventListener(\"load\", () => {\r\n        const response = JSON.parse(xhr.responseText);\r\n        console.log(response);\r\n        resolve(response);\r\n      });\r\n      xhr.addEventListener(\"error\", () => {\r\n        const error = JSON.parse(xhr.responseText);\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <div className={classes.richTextContainer}>\r\n        <div style={{ display: \"flex\", justifyContent: \"flex-start\" }}>\r\n          <label style={{margin:0,padding:0,paddingBottom:\"10px\"}}>{props.title}</label>\r\n        </div>\r\n        <div className=\"editor\">\r\n          <Editor\r\n            editorState={editorState}\r\n            onEditorStateChange={(state) => {              \r\n              setEditorState(state);\r\n              props.setHtml(draftToHtml(convertToRaw(editorState.getCurrentContent())));\r\n            }}            \r\n            editorClassName={classes.editor}\r\n            wrapperClassName={classes.wrapper}\r\n            toolbar={{\r\n              inline: { inDropdown: true },\r\n              list: { inDropdown: true },\r\n              textAlign: { inDropdown: true },\r\n              link: { inDropdown: true },\r\n              history: { inDropdown: true },\r\n              image: {\r\n                uploadCallback: uploadImageCallBack,\r\n                alt: { present: true, mandatory: true },\r\n              },\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      {/* <hr /> */}\r\n      {/* <div\r\n        ref={divRef}\r\n        dangerouslySetInnerHTML={{\r\n          __html: draftToHtml(convertToRaw(editorState.getCurrentContent())),\r\n        }}\r\n      /> */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RichText;\r\n","import React, { useState, useContext,useEffect } from \"react\";\r\nimport AppContext from \"../context/app-context\";\r\nimport classes from \"./AddPost.module.css\";\r\nimport Input from \"./UI/Input\";\r\nimport Button from \"./UI/Button\";\r\nimport Card from \"./UI/Card\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport AutoComplete from \"./UI/AutoComplete\";\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport RichText from \"./UI/RichText\";\r\nimport { addCategory, addPost } from \"../shared/firebase\";\r\nimport { encodeStr } from \"../shared/utilities\";\r\nimport { decodeStr } from \"./../shared/utilities\";\r\nimport { storeActions } from './../store/store';\r\n\r\nconst AddPost = () => {\r\n  const categories = useSelector((state) => state.userPosts.categories);\r\n  const dispatch=useDispatch();\r\n  const initialTags = [];\r\n  const history = useHistory();\r\n  const [title, setTitle] = useState(\"\");\r\n  \r\n  const [initialHtmlContent, setInitialHtmlContent] = useState(\"\");\r\n  const [contentLoaded, setContentLoaded] = useState(false);\r\n  const [htmlContent, setHtmlContent] = useState(\"\");\r\n  const [tags, setTags] = useState([]);\r\n  const ctx = useContext(AppContext);\r\n  console.log(\"ctx\",ctx)\r\n  useEffect(() => {\r\n    setInitialHtmlContent(decodeStr(\"\"));\r\n      setContentLoaded(true)    \r\n  }, []);\r\n\r\n  const titleChangeHandler = (event) => {\r\n    setTitle(event.target.value);\r\n  };\r\n  const getUniqueCatgoryTags = (tags) => {\r\n    const tagsToAdd = [];\r\n    tags.forEach((tag) => {\r\n      if (!tagsToAdd.includes(tag.name)) tagsToAdd.push(tag.name);\r\n    });\r\n    return tagsToAdd;\r\n  };\r\n  const addTags=async (tagsToAdd)=>{\r\n    const tagIdsToAdd = [];\r\n    let id;\r\n    for(const tag of tagsToAdd){\r\n      try {\r\n        id = await addCategory(tag);\r\n        tagIdsToAdd.push(id);\r\n      } catch (error) {\r\n        ctx.callSetError(error);\r\n        return;\r\n      }\r\n    }\r\n    return tagIdsToAdd;\r\n  }\r\n  const submitHandler = async (event) => {\r\n    event.preventDefault();\r\n    let tagIds = [];\r\n    const tagsToAdd = getUniqueCatgoryTags(\r\n      tags.length == 0 ? initialTags : tags\r\n    );\r\n    tagIds = await addTags(tagsToAdd);\r\n    dispatch(storeActions.addCategories(tagIds));\r\n    const data = {\r\n      tags: tagIds,\r\n      title,\r\n      article: encodeStr(htmlContent),\r\n    };\r\n    // const user= await logIn(email,password);\r\n    // console.log(title, htmlContent, tags.length == 0 ? initialTags : tags);\r\n    try {      \r\n      const docId=await addPost(ctx.uid, data);\r\n      \r\n      dispatch(storeActions.addPost({\r\n        id:docId,\r\n        uid:ctx.uid,\r\n        ...data\r\n      }))\r\n    } catch (error) {\r\n      ctx.callSetError(error);\r\n      return;\r\n    }\r\n\r\n    history.push(\"/\");\r\n    // const user = await ctx.login(title);\r\n    \r\n    // if (user) history.replace(\"/\");\r\n  };\r\n\r\n  const cancelHandler = () => {\r\n    ctx.clearError();\r\n    history.replace(\"/\");\r\n  };\r\n  const tagsChangeHandler = (tags) => {\r\n    setTags(tags);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.content}>\r\n      <Card className={classes.title}>\r\n        <h1>Add Post</h1>\r\n      </Card>\r\n      <div className={classes.parentContainer}>\r\n        <Card className={classes.container} style={{ paddingBottom: \"20px\" }}>\r\n          <form onSubmit={submitHandler}>\r\n            <div className={classes.firstRow}>\r\n              <Input\r\n                id=\"title\"\r\n                type=\"text\"\r\n                placeholder=\"Enter title of the post\"\r\n                onChange={titleChangeHandler}\r\n                value={title}\r\n                title=\"Title\"\r\n                required\r\n                inputContainerStyle={{ flexDirection: \"column\" }}\r\n              />\r\n              <AutoComplete\r\n                title=\"Select Categories\"\r\n                tags={initialTags}\r\n                suggestions={categories}\r\n                onTagsChanged={tagsChangeHandler}\r\n              />\r\n            </div>\r\n            {contentLoaded && (\r\n              <RichText\r\n                title=\"Article\"\r\n                initHtml={initialHtmlContent}\r\n                // html={initialHtmlContent}\r\n                setHtml={setHtmlContent}\r\n              />\r\n            )}\r\n\r\n\r\n            <div className={classes.actions}>\r\n              <Button\r\n                title=\"Save\"\r\n                onClick={() => {}}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n              <Button\r\n                title=\"Cancel\"\r\n                type=\"button\"\r\n                onClick={cancelHandler}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n            </div>\r\n          </form>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddPost;\r\n","import React from 'react'\r\nimport AddPost from '../components/AddPost'\r\n\r\nconst AddNewPost = () => {\r\n    debugger;\r\n    return (\r\n        <AddPost/>\r\n    )\r\n}\r\n\r\nexport default AddNewPost\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport AppContext from \"../context/app-context\";\r\nimport classes from \"./EditPostComponent.module.css\";\r\nimport Input from \"./UI/Input\";\r\nimport Button from \"./UI/Button\";\r\nimport Card from \"./UI/Card\";\r\nimport { decodeStr } from \"./../shared/utilities\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport AutoComplete from \"./UI/AutoComplete\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport RichText from \"./UI/RichText\";\r\nimport { addCategory, editPost, deleteCategory } from \"../shared/firebase\";\r\nimport { encodeStr } from \"../shared/utilities\";\r\nimport { EditorState, ContentState } from \"draft-js\";\r\nimport { storeActions } from \"../store/store\";\r\nimport htmlToDraft from \"html-to-draftjs\";\r\n\r\nconst EditPostComponent = () => {\r\n  const params = useParams();\r\n  const postId = params.id;\r\n  const [title, setTitle] = useState(\"\");\r\n  const ctx = useContext(AppContext);\r\n  const history = useHistory();\r\n  debugger;\r\n  const [htmlContent, setHtmlContent] = useState(\"\");\r\n  const [initialHtmlContent, setInitialHtmlContent] = useState(\"\");\r\n  const [contentLoaded, setContentLoaded] = useState(false);\r\n  const [tags, setTags] = useState([]);\r\n  const [initialTags, setInitialTags] = useState();\r\n  const dispatch = useDispatch();\r\n  const categories = useSelector((state) => state.userPosts.categories);\r\n  const posts = useSelector((state) => state.userPosts.posts);\r\n  const userPost = posts.find((post) => post.id == postId);\r\n\r\n  const { title: initTitle, tags: initTags, article } = userPost;\r\n  useEffect(() => {\r\n    if (userPost) setTitle(initTitle);\r\n    if (userPost) setTags(initTags || []);\r\n    if (userPost) setInitialTags(initTags || []);\r\n    const contentBlock = htmlToDraft(decodeStr(article));\r\n    if (contentBlock) {\r\n      const contentState = ContentState.createFromBlockArray(\r\n        contentBlock.contentBlocks\r\n      );\r\n      const editorState = EditorState.createWithContent(contentState);\r\n      setInitialHtmlContent(decodeStr(article));\r\n      setContentLoaded(true)\r\n    }\r\n  }, [initTitle, initTags, article]);\r\n\r\n  if (!userPost) return null;\r\n  const titleChangeHandler = (event) => {\r\n    setTitle(event.target.value);\r\n  };\r\n  const getUniqueCatgoryTags = (tags) => {\r\n    const tagsToAdd = [];\r\n    tags.forEach((tag) => {\r\n      if (!tagsToAdd.includes(tag.name)) tagsToAdd.push(tag.name);\r\n    });\r\n    return tagsToAdd;\r\n  };\r\n  const getTagsToDelete = () => {\r\n    const tagNames=tags.map(tag=>tag.name)    \r\n    return initialTags.filter(init=>!tagNames.includes(init.name));\r\n  };\r\n  const addTags = async (tagsToAdd) => {\r\n    const tagIdsToAdd = [];\r\n    let id;\r\n    for (const tag of tagsToAdd) {\r\n      try {\r\n        id = await addCategory(tag);\r\n        tagIdsToAdd.push(id);\r\n      } catch (error) {\r\n        ctx.callSetError(error);\r\n        return;\r\n      }\r\n    }\r\n    return tagIdsToAdd;\r\n  };\r\n  const submitHandler = async (event) => {\r\n    event.preventDefault();\r\n    let tagIds = [];\r\n    const tagsToAdd = getUniqueCatgoryTags(\r\n      tags.length == 0 ? initialTags : tags\r\n    );\r\n    tagIds = await addTags(tagsToAdd);\r\n    dispatch(storeActions.addCategories(tagIds));\r\n    debugger\r\n    const tagsToDelete=getTagsToDelete();\r\n    tagsToDelete.forEach(async(tagId) => {\r\n      const delRef = await deleteCategory(tagId.id);\r\n      console.log(delRef);\r\n    });\r\n    dispatch(storeActions.deleteCategories(tagsToDelete));\r\n    await addTags(tagsToAdd);\r\n    debugger;\r\n    const data = {\r\n      tags: tagIds,\r\n      title,\r\n      article: encodeStr(htmlContent?htmlContent:initialHtmlContent),\r\n    };\r\n    // const user= await logIn(email,password);\r\n    // console.log(title, htmlContent, tags.length == 0 ? initialTags : tags);\r\n    try {\r\n      const docId = await editPost(ctx.uid,postId, data);\r\n\r\n      dispatch(\r\n        storeActions.editPost({\r\n          id: docId,\r\n          uid: ctx.uid,\r\n          ...data,\r\n        })\r\n      );\r\n    } catch (error) {\r\n      ctx.callSetError(error);\r\n      return;\r\n    }\r\n\r\n    history.push(\"/\");\r\n    // const user = await ctx.login(title);\r\n\r\n    // if (user) history.replace(\"/\");\r\n  };\r\n\r\n  const cancelHandler = () => {\r\n    ctx.clearError();\r\n    history.replace(\"/\");\r\n  };\r\n  const tagsChangeHandler = (tags) => {\r\n    setTags(tags);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.content}>\r\n      <Card className={classes.title}>\r\n        <h1>Edit Post</h1>\r\n      </Card>\r\n      <div className={classes.parentContainer}>\r\n        <Card className={classes.container} style={{ paddingBottom: \"20px\" }}>\r\n          <form onSubmit={submitHandler}>\r\n            <div className={classes.firstRow}>\r\n              <Input\r\n                id=\"title\"\r\n                type=\"text\"\r\n                placeholder=\"Enter title of the post\"\r\n                onChange={titleChangeHandler}\r\n                value={title}\r\n                title=\"Title\"\r\n                required\r\n                inputContainerStyle={{ flexDirection: \"column\" }}\r\n              />\r\n              {contentLoaded && (\r\n                <AutoComplete\r\n                  title=\"Select Categories\"\r\n                  tags={initialTags}\r\n                  suggestions={categories || []}\r\n                  onTagsChanged={tagsChangeHandler}\r\n                />\r\n              )}\r\n            </div>\r\n            {contentLoaded && (\r\n              <RichText\r\n                title=\"Article\"\r\n                initHtml={initialHtmlContent}\r\n                // html={initialHtmlContent}\r\n                setHtml={setHtmlContent}\r\n              />\r\n            )}\r\n\r\n            <div className={classes.actions}>\r\n              <Button\r\n                title=\"Save\"\r\n                onClick={() => {}}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n              <Button\r\n                title=\"Cancel\"\r\n                type=\"button\"\r\n                onClick={cancelHandler}\r\n                style={{ marginRight: \"10px\" }}\r\n              />\r\n            </div>\r\n          </form>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditPostComponent;\r\n","import React from 'react'\r\nimport EditPostComponent from '../components/EditPostComponent'\r\nconst EditPost = () => {\r\n    debugger;\r\n    return (\r\n        <EditPostComponent/>\r\n    )\r\n}\r\n\r\nexport default EditPost\r\n","import React, { useContext } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport classes from \"./Layout.module.css\";\r\nimport AppContext from \"../../context/app-context\";\r\nimport Button from \"../UI/Button\";\r\nconst Layout = (props) => {\r\n  const ctx = useContext(AppContext);\r\n  console.log(ctx.isLoggedIn );\r\n  const loggedInComponents = ctx.isLoggedIn ? (\r\n    <>\r\n      <li>\r\n        <Link to=\"/posts/newPost\">\r\n          <Button title=\"New Post\" onClick={() => {}} style={{width:\"10vw\"}}/>\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Button title=\"Sign Out\" onClick={ctx.signOff} style={{width:\"10vw\"}}/>\r\n      </li>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <li>\r\n        <Link to=\"/signup\">\r\n          <Button title=\"Sign Up\" onClick={ctx.signOff} style={{width:\"10vw\"}} />\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link to=\"/login\">\r\n          <Button title=\"Login\" onClick={ctx.signOff} style={{width:\"10vw\"}} />\r\n        </Link>\r\n      </li>\r\n    </>\r\n  );\r\n  const isImage = !!props.imageUrl;\r\n  const contLogo = isImage ? (\r\n    <img className={classes.logo} src={props.imageUrl} alt={props.title} />\r\n  ) : (\r\n    <span className={classes.logo} style={{ display: \"inline-block\" }}>{props.title}</span>\r\n  );\r\n  return (\r\n    <div className={classes.container}>\r\n      <div className={classes.containerLogo}><Link to=\"/\"> {contLogo}</Link></div>\r\n      <h1> User Posts</h1>\r\n      <div >\r\n        <nav>\r\n          <ul className={classes.containerNav}>{loggedInComponents}</ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import React, { useContext } from \"react\";\r\nimport Button from \"../UI/Button\";\r\nimport Modal from \"./Modal\";\r\nimport AppContext from \"../../context/app-context\";\r\nimport Backdrop from \"./Backdrop\";\r\n\r\nconst ErrorModal = (props) => {\r\n  const ctx = useContext(AppContext);\r\n  const { error } = ctx;\r\n  return(\r\n    error && error.message ? (\r\n      <>\r\n        <Backdrop onClose={props.onClose} />\r\n        <Modal\r\n          header={\r\n            <h1\r\n              style={{\r\n                color: \"white\",\r\n                fontWeight: \"bold\",\r\n                padding: \"5px\",\r\n                width: \"100%\"                \r\n              }}\r\n            >\r\n              Some error occurred\r\n            </h1>\r\n          }\r\n          actions={<Button title=\"Close\" onClick={props.onClose} style={{fontWeight:\"bold\"}}/>}\r\n          bodyStyle={{ color: \"red\"}}\r\n          onClose={props.onClose}\r\n        >\r\n          <p style={{backgroundColor:\"white\",padding:\"10px\",borderRadius:\"5px\",border:\"2px solid black\"}}>{error.message.replace(/Firebase:/g, '')}</p>\r\n        </Modal>\r\n      </>\r\n    ):null\r\n  )\r\n}\r\n\r\nexport default ErrorModal;","import React from 'react'\r\n\r\nconst Container = (props) => {\r\n    return (\r\n        <div style={{flex:1,alignSelf:\"center\",display:\"flex\",flexDirection:\"column\",minWidth:\"80vw\",width:\"100%\"}}>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Container\r\n","import { useContext,useEffect } from 'react';\nimport './App.css';\nimport Signup from './pages/SignUp';\nimport {Route, Switch,Redirect} from 'react-router-dom';\nimport Login from './pages/Login';\nimport ViewPosts from './pages/ViewPosts';\nimport AllPosts from './pages/AllPosts';\nimport AddNewPosts from './pages/AddNewPost'\nimport AppContext from './context/app-context';\nimport EditPost from './pages/EditPost';\nimport Layout from './components/shared/Layout';\nimport ErrorModal from './components/shared/ErrorModal';\nimport Container from './components/shared/Container';\nimport {getCategories,getUsers,getUsersPosts} from './shared/firebase';\nimport {useDispatch} from 'react-redux';\nimport {storeActions} from './store/store'\n\nfunction App() {  \n  const dispatch = useDispatch();\n  useEffect(()=>{      \n    const getCat=async()=>{\n      const cat=await getCategories();\n      dispatch(storeActions.loadCategories(cat))\n    }\n    const getUsersData=async()=>{  \n      \n      const users=await getUsers();\n      dispatch(storeActions.loadUsers(users))\n      for(const user of users){\n        const posts=await getUsersPosts(user.id);\n        dispatch(storeActions.loadPosts(posts.map(post=>{return {uid:user.id,...post}})))\n      }\n      \n    }\n    getCat();\n    getUsersData();\n  },[dispatch]);\n  const ctx=useContext(AppContext);\n  const loggedInRoutes=ctx.isLoggedIn?<>\n  <Route path=\"/posts/newPost\" exact>\n        <AddNewPosts />\n      </Route>\n      <Route path=\"/posts/edit/:id\" exact>\n        <EditPost />\n      </Route>\n  </>:null;\n  return (\n    <>\n    \n    <ErrorModal onClose={()=>ctx.clearError()}/>\n    <div style={{display:\"flex\",flexDirection:\"column\",height:\"100vh\"}}>\n    <Layout title=\"User Posts\" imageUrl={process.env.PUBLIC_URL + '/blog.jfif'} />\n    <Container>\n    <Switch>\n    <Route path=\"/posts\" exact>\n        <AllPosts/>\n      </Route>\n      <Route path=\"/\" exact>\n        <Redirect to=\"/posts\"/>\n      </Route>\n      <Route path=\"/signup\">\n        <Signup/>\n      </Route>\n      <Route path=\"/login\">\n        <Login/>\n      </Route>\n      <Route path=\"/posts/view/:postId\" >\n        <ViewPosts/>\n      </Route>\n\n      {loggedInRoutes}\n\n      {/* <Route path=\"**\">\n        <Redirect to=\"/posts\"/>\n      </Route> */}\n    </Switch>\n    </Container>\n    </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport { AppProvider } from './context/app-context';\nimport {Provider} from 'react-redux'\nimport store from './store/store'\nimport App from './App';\n\nReactDOM.render(\n  <Provider store={store}>\n  <AppProvider>\n  <Router>\n    <App />\n    </Router></AppProvider>\n    </Provider>\n    ,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"SignupComponent_content__-xS3c\",\"title\":\"SignupComponent_title__3Y18q\",\"parentContainer\":\"SignupComponent_parentContainer__3pl2j\",\"container\":\"SignupComponent_container__Nfpou\",\"inputContainer\":\"SignupComponent_inputContainer__1L_WW\",\"imageContainer\":\"SignupComponent_imageContainer__27QWb\",\"input\":\"SignupComponent_input__1OX9u\",\"actions\":\"SignupComponent_actions__3CL6e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteAction\":\"Post_deleteAction__21U8d\",\"editAction\":\"Post_editAction__2fh5P\",\"edit\":\"Post_edit__2FGXk\",\"delete\":\"Post_delete__lXlnM\",\"user\":\"Post_user__3JLKz\",\"author\":\"Post_author__21ai3\",\"article\":\"Post_article__1Wj_m\",\"container\":\"Post_container__19ZOW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"AddPost_content__2d9Hb\",\"title\":\"AddPost_title__3C7qy\",\"parentContainer\":\"AddPost_parentContainer__1143G\",\"firstRow\":\"AddPost_firstRow__2ZwXU\",\"container\":\"AddPost_container__FStfg\",\"inputContainer\":\"AddPost_inputContainer__n2vjo\",\"input\":\"AddPost_input__1BqZx\",\"actions\":\"AddPost_actions__3_Ld8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"EditPostComponent_content__10-w2\",\"title\":\"EditPostComponent_title__3ZHlB\",\"parentContainer\":\"EditPostComponent_parentContainer__3mwhQ\",\"firstRow\":\"EditPostComponent_firstRow__2pCVX\",\"container\":\"EditPostComponent_container__1lmVH\",\"inputContainer\":\"EditPostComponent_inputContainer__3F7K8\",\"input\":\"EditPostComponent_input__iHfoO\",\"actions\":\"EditPostComponent_actions__3GgIu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Modal_container__3cGOI\",\"modal-container\":\"Modal_modal-container__2l8su\",\"modal-header\":\"Modal_modal-header__1MJC1\",\"modal-body\":\"Modal_modal-body__2kJKa\",\"modal-footer\":\"Modal_modal-footer__2rLty\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Layout_container__3JcJZ\",\"containerLogo\":\"Layout_containerLogo__3WdLM\",\"containerNav\":\"Layout_containerNav__118kZ\",\"logo\":\"Layout_logo__3iCfm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CategoriesList_container__3yrEm\",\"active\":\"CategoriesList_active__3Dgc8\",\"catgories\":\"CategoriesList_catgories__1M5bR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__2OU2l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image-container\":\"ImageUpload_image-container__S2-Pb\",\"button-container\":\"ImageUpload_button-container__1WJDd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AutoComplete_container__1WOpD\",\"reactTags\":\"AutoComplete_reactTags__5FuH5\",\"labelContainer\":\"AutoComplete_labelContainer__2d16O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"RichText_editor__xR2ML\",\"DraftEditor-root\":\"RichText_DraftEditor-root__3n0e2\",\"wrapper\":\"RichText_wrapper__2TeGH\",\"richTextContainer\":\"RichText_richTextContainer__2l_3T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputContainer\":\"Input_inputContainer__2_irD\",\"input\":\"Input_input__FrfsP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputContainer\":\"TextArea_inputContainer__yl6KE\",\"input\":\"TextArea_input__1bi-m\"};"],"sourceRoot":""}